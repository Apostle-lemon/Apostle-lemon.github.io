# 飞书竞赛机器人

golang 文件夹下，go run main.go 可以启动一个 go 程序，这个程序会定期从 mysql 数据库中读取数据，查找没有填入表格中的元素，将其填入表格。

python 文件夹下，python main.py 可以启动一个 python 程序，可以定期爬取网络上的数据。

查询对应的 wiki 可以获得内容，这里的 obj_token 就是多维表格的 apptoken

```
{
  "code": 0,
  "data": {
    "node": {
      "creator": "ou_d89c8fe4852317184659160665dc0cbc",
      "has_child": false,
      "node_create_time": "1683126782",
      "node_token": "wikcnEYVbd1wvUzVa01NNaaxmOe",
      "node_type": "origin",
      "obj_create_time": "1683126781",
      "obj_edit_time": "1683126781",
      "obj_token": "ZEzobwp5VagznYs66zqcDe6Nnac",
      "obj_type": "bitable",
      "origin_node_token": "wikcnEYVbd1wvUzVa01NNaaxmOe",
      "origin_space_id": "7145117180906979330",
      "owner": "ou_d89c8fe4852317184659160665dc0cbc",
      "parent_node_token": "",
      "space_id": "7145117180906979330",
      "title": "竞赛报名 副本"
    }
  },
  "msg": "success"
}
```

数据表 Table 是多维表格的数据容器，一个多维表格中至少有一个数据表，也可能有多个数据表。每个数据表都有唯一标识 table_id。table_id 在一个多维表格 App 中唯一，在全局不一定唯一。

可以通过 **列出数据表** API 获得数据表 table_id。

```
{
  "code": 0,
  "data": {
    "has_more": false,
    "items": [
      {
        "name": "竞赛报名",
        "revision": 0,
        "table_id": "tblLgSo0nK803lTH"
      },
      {
        "name": "竞赛报名——爬取数据",
        "revision": 0,
        "table_id": "tbls2xvl2e4HWo27"
      }
    ],
    "page_token": "tbls2xvl2e4HWo27",
    "total": 2
  },
  "msg": "success"
}
```

通过 APP token 和 table_id 就可以修改 record。

现在我们开始尝试使用 docker 进行部署。

```
docker compose up
```
