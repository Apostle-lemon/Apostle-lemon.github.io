
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="Apostle-lemon">
      
      
        <link rel="canonical" href="https://apostle-lemon.github.io./3-8%E8%AF%BE%E7%A8%8B%E5%AD%A6%E4%B9%A0/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E4%BA%8C/%E3%80%90%E6%99%BA%E4%BA%91%E8%AF%BE%E5%A0%82%E3%80%91%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E4%BA%8C/">
      
      
        <link rel="prev" href="../../%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E3%80%90%E8%A7%86%E9%A2%91%E3%80%91%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">
      
      
        <link rel="next" href="../../%E4%B8%8D%E6%83%B3%E5%AD%A6%E4%BA%86/">
      
      <link rel="icon" href="../../../img/yileina.ico">
      <meta name="generator" content="mkdocs-1.5.2, mkdocs-material-9.1.21">
    
    
      
        <title>[æ™ºäº‘è¯¾å ‚] è®¡ç®—æœºç³»ç»ŸäºŒ - lemonğŸ‹</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.eebd395e.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ecc896b0.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../stylesheets/extra.css">
    
      <link rel="stylesheet" href="../../../css/extra.css">
    
      <link rel="stylesheet" href="../../../css/color.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="blue-grey" data-md-color-accent="yellow">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#æ™ºäº‘è¯¾å ‚-è®¡ç®—æœºç³»ç»ŸäºŒ" class="md-skip">
          è·³è½¬è‡³
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="é¡µçœ‰">
    <a href="../../.." title="lemonğŸ‹" class="md-header__button md-logo" aria-label="lemonğŸ‹" data-md-component="logo">
      
  <img src="../../../img/yileina2.jpeg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            lemonğŸ‹
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              [æ™ºäº‘è¯¾å ‚] è®¡ç®—æœºç³»ç»ŸäºŒ
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="æœç´¢" placeholder="æœç´¢" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="æŸ¥æ‰¾">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="åˆ†äº«" aria-label="åˆ†äº«" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="æ¸…ç©ºå½“å‰å†…å®¹" aria-label="æ¸…ç©ºå½“å‰å†…å®¹" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            æ­£åœ¨åˆå§‹åŒ–æœç´¢å¼•æ“
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/Apostle-lemon" title="å‰å¾€ä»“åº“" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    ğŸ‹çš„githubä¸»é¡µ
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="æ ‡ç­¾" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../../.." class="md-tabs__link">
      æ˜¯æŸ æª¬
    </a>
  </li>

      
        
  
  
    
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../../%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E3%80%90%E8%A7%86%E9%A2%91%E3%80%91%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" class="md-tabs__link md-tabs__link--active">
        è¯¾ç¨‹å­¦ä¹ 
      </a>
    </li>
  

  

      
        
  
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../../../%E7%9F%A5%E8%AF%86%E6%AC%A2%E6%84%89/store/mongodb/mongodb%E5%9F%BA%E7%A1%80%E7%94%A8%E6%B3%95/" class="md-tabs__link">
        çŸ¥è¯†æ¬¢æ„‰
      </a>
    </li>
  

  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="å¯¼èˆªæ " data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="lemonğŸ‹" class="md-nav__button md-logo" aria-label="lemonğŸ‹" data-md-component="logo">
      
  <img src="../../../img/yileina2.jpeg" alt="logo">

    </a>
    lemonğŸ‹
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Apostle-lemon" title="å‰å¾€ä»“åº“" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    ğŸ‹çš„githubä¸»é¡µ
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        æ˜¯æŸ æª¬
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
      
      
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          è¯¾ç¨‹å­¦ä¹ 
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          è¯¾ç¨‹å­¦ä¹ 
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
          è®¡ç®—æœºç½‘ç»œ
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_1">
          <span class="md-nav__icon md-icon"></span>
          è®¡ç®—æœºç½‘ç»œ
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E3%80%90%E8%A7%86%E9%A2%91%E3%80%91%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" class="md-nav__link">
        [è§†é¢‘] è®¡ç®—æœºç½‘ç»œ
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" checked>
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
          è®¡ç®—æœºç³»ç»ŸäºŒ
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_2_2">
          <span class="md-nav__icon md-icon"></span>
          è®¡ç®—æœºç³»ç»ŸäºŒ
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          [æ™ºäº‘è¯¾å ‚] è®¡ç®—æœºç³»ç»ŸäºŒ
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        [æ™ºäº‘è¯¾å ‚] è®¡ç®—æœºç³»ç»ŸäºŒ
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="ç›®å½•">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      ç›®å½•
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#course-infomation-and-policy" class="md-nav__link">
    Course Infomation and Policy
  </a>
  
    <nav class="md-nav" aria-label="Course Infomation and Policy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#æ¨èä¹¦ç±" class="md-nav__link">
    æ¨èä¹¦ç±
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    Introduction
  </a>
  
    <nav class="md-nav" aria-label="Introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#operating-system-definition" class="md-nav__link">
    Operating System Definition
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hardware-components" class="md-nav__link">
    Hardware Components
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#devices" class="md-nav__link">
    Devices
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#interrupts-and-traps" class="md-nav__link">
    Interrupts and Traps
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#interrupt-handling" class="md-nav__link">
    Interrupt Handling
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#io-from-system-call-to-devices-and-back" class="md-nav__link">
    IO From System Call to Devices, and Back
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dma-direct-memory-access" class="md-nav__link">
    DMA Direct Memory Access
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#numa" class="md-nav__link">
    NUMA
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#operating-system-sperations-multitasking" class="md-nav__link">
    Operating System Sperations: Multitasking
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dual-mode-operation" class="md-nav__link">
    Dual-mode Operation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#process-management-activities" class="md-nav__link">
    Process Management Activities
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#thread" class="md-nav__link">
    Thread
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mmu-memory-management-unit" class="md-nav__link">
    MMU Memory Management Unit
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resource-management-file-system" class="md-nav__link">
    Resource Management File System
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resource-management-io-system-management" class="md-nav__link">
    Resource Management: I/O System Management
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#separate-policy-and-mechanism" class="md-nav__link">
    Separate Policy and Mechanism
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#è™šæ‹ŸåŒ–" class="md-nav__link">
    è™šæ‹ŸåŒ–
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#os-services--structures" class="md-nav__link">
    Os Services &amp; Structures
  </a>
  
    <nav class="md-nav" aria-label="Os Services & Structures">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cliguitouchscreen-interfacesvoice-command" class="md-nav__link">
    CLIï¼ŒGUIï¼ŒTouchscreen Interfacesï¼ŒVoice Command
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#system-calls" class="md-nav__link">
    System Calls
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#application-programming-interface" class="md-nav__link">
    Application Programming Interface
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#types-of-system-calls" class="md-nav__link">
    Types of System Calls
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c-è¯­è¨€ä¸­çš„-fork" class="md-nav__link">
    C è¯­è¨€ä¸­çš„ Fork
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#case-study-ioctl" class="md-nav__link">
    Case Study Ioctl
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#linkers--loaders" class="md-nav__link">
    Linkers &amp; Loaders
  </a>
  
    <nav class="md-nav" aria-label="Linkers & Loaders">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#åŠ¨æ€é“¾æ¥" class="md-nav__link">
    åŠ¨æ€é“¾æ¥
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#operating-system-structure" class="md-nav__link">
    Operating System Structure
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#process" class="md-nav__link">
    Process
  </a>
  
    <nav class="md-nav" aria-label="Process">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#process-state" class="md-nav__link">
    Process State
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#process-control-block-pcb" class="md-nav__link">
    Process Control Block PCB
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#thread_1" class="md-nav__link">
    Thread
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#process-creation" class="md-nav__link">
    Process Creation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#process-termination" class="md-nav__link">
    Process Termination
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#android-process-importance-hierarchy" class="md-nav__link">
    Android Process Importance Hierarchy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#interprocess-communication" class="md-nav__link">
    Interprocess Communication
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#remote-procedure-call-rpc" class="md-nav__link">
    Remote Procedure Call RPC
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#thread_2" class="md-nav__link">
    Thread
  </a>
  
    <nav class="md-nav" aria-label="Thread">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#thread-cancellation" class="md-nav__link">
    Thread Cancellation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#thread-specific-data--tls" class="md-nav__link">
    Thread Specific Data &amp; TLS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lightweight-process--scheduler-activities" class="md-nav__link">
    Lightweight Process &amp; Scheduler Activities
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#linux-thread" class="md-nav__link">
    Linux Thread
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#thread-library" class="md-nav__link">
    Thread Library
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#linux-thread_1" class="md-nav__link">
    Linux Thread
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cpu-scheduling" class="md-nav__link">
    CPU Scheduling
  </a>
  
    <nav class="md-nav" aria-label="CPU Scheduling">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-concepts" class="md-nav__link">
    Basic Concepts
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scheduling-criteria-è°ƒåº¦çš„å‡†åˆ™" class="md-nav__link">
    Scheduling Criteria è°ƒåº¦çš„å‡†åˆ™
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#algorithm-è°ƒåº¦çš„ç®—æ³•" class="md-nav__link">
    Algorithm è°ƒåº¦çš„ç®—æ³•
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#thread-scheduling" class="md-nav__link">
    Thread Scheduling
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multiple-processor-scheduling-å¤šå¤„ç†å™¨çš„è°ƒåº¦" class="md-nav__link">
    Multiple-processor Scheduling å¤šå¤„ç†å™¨çš„è°ƒåº¦
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-really-happened-on-mars" class="md-nav__link">
    What Really Happened on Mars
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#synchronization" class="md-nav__link">
    Synchronization
  </a>
  
    <nav class="md-nav" aria-label="Synchronization">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#race-condition" class="md-nav__link">
    Race Condition
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#critical-section" class="md-nav__link">
    Critical Section
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#solution-to-critical-section-three-requirements" class="md-nav__link">
    Solution to Critical-section: Three Requirements
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sequential-consistency-sc" class="md-nav__link">
    Sequential Consistency (SC)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hardware-instructions" class="md-nav__link">
    Hardware Instructions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#semaphore-ä¿¡å·é‡" class="md-nav__link">
    Semaphore ä¿¡å·é‡
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synchronization-examples" class="md-nav__link">
    Synchronization Examples
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
          è®¡ç®—ç†è®º
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_3">
          <span class="md-nav__icon md-icon"></span>
          è®¡ç®—ç†è®º
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E4%B8%8D%E6%83%B3%E5%AD%A6%E4%BA%86/" class="md-nav__link">
        ä½ å¥½
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
          ç¼–è¯‘åŸç†
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_4">
          <span class="md-nav__icon md-icon"></span>
          ç¼–è¯‘åŸç†
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/%E3%80%90%E4%B8%8A%E8%AF%BE%E3%80%91%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/" class="md-nav__link">
        ç¼–è¯‘åŸç†
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          çŸ¥è¯†æ¬¢æ„‰
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          çŸ¥è¯†æ¬¢æ„‰
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
          mongodb
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_1">
          <span class="md-nav__icon md-icon"></span>
          mongodb
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E7%9F%A5%E8%AF%86%E6%AC%A2%E6%84%89/store/mongodb/mongodb%E5%9F%BA%E7%A1%80%E7%94%A8%E6%B3%95/" class="md-nav__link">
        Mongodb
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E7%9F%A5%E8%AF%86%E6%AC%A2%E6%84%89/store/mongodb/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8%20Go%20%E8%BF%9E%E6%8E%A5%E8%BF%9C%E7%A8%8B%20Linux-mongodb/" class="md-nav__link">
        å¦‚ä½•ä½¿ç”¨ Go è¿æ¥è¿œç¨‹ Linux-mongodb
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
          è¯­è¨€ç›¸å…³
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_2">
          <span class="md-nav__icon md-icon"></span>
          è¯­è¨€ç›¸å…³
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_1" >
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3_2_1" id="__nav_3_2_1_label" tabindex="0">
          golang
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_2_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_2_1">
          <span class="md-nav__icon md-icon"></span>
          golang
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_1_1" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3_2_1_1" id="__nav_3_2_1_1_label" tabindex="0">
          å½’æ¡£
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_3_2_1_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_2_1_1">
          <span class="md-nav__icon md-icon"></span>
          å½’æ¡£
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E7%9F%A5%E8%AF%86%E6%AC%A2%E6%84%89/%E8%AF%AD%E8%A8%80%E7%9B%B8%E5%85%B3/golang/%E5%BD%92%E6%A1%A3/Go%20%E6%97%A0%E6%B3%95%E5%AF%B9%20main%20%E6%A8%A1%E5%9D%97%E6%89%A7%E8%A1%8C%E6%B5%8B%E8%AF%95/" class="md-nav__link">
        Go æ— æ³•å¯¹ Main æ¨¡å—æ‰§è¡Œæµ‹è¯•
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_1_2" >
      
      
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3_2_1_2" id="__nav_3_2_1_2_label" tabindex="0">
          goç²¾è¿›ä¹‹è·¯
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_3_2_1_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_2_1_2">
          <span class="md-nav__icon md-icon"></span>
          goç²¾è¿›ä¹‹è·¯
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E7%9F%A5%E8%AF%86%E6%AC%A2%E6%84%89/%E8%AF%AD%E8%A8%80%E7%9B%B8%E5%85%B3/golang/Go%E8%AF%AD%E8%A8%80%E7%B2%BE%E8%BF%9B%E4%B9%8B%E8%B7%AF/40%20%E5%8C%85%E5%86%85%E6%B5%8B%E8%AF%95%E4%B8%8E%E5%8C%85%E5%A4%96%E6%B5%8B%E8%AF%95%E7%9A%84%E5%8C%BA%E5%88%AB/" class="md-nav__link">
        åŒ…å†…æµ‹è¯•ä¸åŒ…å¤–æµ‹è¯•çš„åŒºåˆ«
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E7%9F%A5%E8%AF%86%E6%AC%A2%E6%84%89/%E8%AF%AD%E8%A8%80%E7%9B%B8%E5%85%B3/golang/Go%E8%AF%AD%E8%A8%80%E7%B2%BE%E8%BF%9B%E4%B9%8B%E8%B7%AF/41%20%E6%9C%89%E5%B1%82%E6%AC%A1%E5%9C%B0%E7%BB%84%E7%BB%87%E6%B5%8B%E8%AF%95%E4%BB%A3%E7%A0%81/" class="md-nav__link">
        41 æœ‰å±‚æ¬¡åœ°ç»„ç»‡æµ‹è¯•ä»£ç 
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E7%9F%A5%E8%AF%86%E6%AC%A2%E6%84%89/%E8%AF%AD%E8%A8%80%E7%9B%B8%E5%85%B3/golang/Go%E8%AF%AD%E8%A8%80%E7%B2%BE%E8%BF%9B%E4%B9%8B%E8%B7%AF/42%20%E4%BC%98%E5%85%88%E7%BC%96%E5%86%99%E8%A1%A8%E9%A9%B1%E5%8A%A8%E7%9A%84%E6%B5%8B%E8%AF%95/" class="md-nav__link">
        42 ä¼˜å…ˆç¼–å†™è¡¨é©±åŠ¨çš„æµ‹è¯•
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E7%9F%A5%E8%AF%86%E6%AC%A2%E6%84%89/%E8%AF%AD%E8%A8%80%E7%9B%B8%E5%85%B3/golang/Go%E8%AF%AD%E8%A8%80%E7%B2%BE%E8%BF%9B%E4%B9%8B%E8%B7%AF/43%20%E4%BD%BF%E7%94%A8%20testdata%20%E7%AE%A1%E7%90%86%E6%B5%8B%E8%AF%95%E4%BE%9D%E8%B5%96%E7%9A%84%E5%A4%96%E9%83%A8%E6%95%B0%E6%8D%AE%E6%96%87%E4%BB%B6/" class="md-nav__link">
        43 ä½¿ç”¨ Testdata ç®¡ç†æµ‹è¯•ä¾èµ–çš„å¤–éƒ¨æ•°æ®æ–‡ä»¶
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E7%9F%A5%E8%AF%86%E6%AC%A2%E6%84%89/%E8%AF%AD%E8%A8%80%E7%9B%B8%E5%85%B3/golang/Go%E8%AF%AD%E8%A8%80%E7%B2%BE%E8%BF%9B%E4%B9%8B%E8%B7%AF/44%20%E6%AD%A3%E7%A1%AE%E8%BF%90%E7%94%A8%20fake%20stub%20%E5%92%8C%20mock%20%E7%AD%89%E8%BE%85%E5%8A%A9%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/" class="md-nav__link">
        44 æ­£ç¡®è¿ç”¨ Fake Stub å’Œ Mock ç­‰è¾…åŠ©å•å…ƒæµ‹è¯•
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="ç›®å½•">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      ç›®å½•
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#course-infomation-and-policy" class="md-nav__link">
    Course Infomation and Policy
  </a>
  
    <nav class="md-nav" aria-label="Course Infomation and Policy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#æ¨èä¹¦ç±" class="md-nav__link">
    æ¨èä¹¦ç±
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    Introduction
  </a>
  
    <nav class="md-nav" aria-label="Introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#operating-system-definition" class="md-nav__link">
    Operating System Definition
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hardware-components" class="md-nav__link">
    Hardware Components
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#devices" class="md-nav__link">
    Devices
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#interrupts-and-traps" class="md-nav__link">
    Interrupts and Traps
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#interrupt-handling" class="md-nav__link">
    Interrupt Handling
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#io-from-system-call-to-devices-and-back" class="md-nav__link">
    IO From System Call to Devices, and Back
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dma-direct-memory-access" class="md-nav__link">
    DMA Direct Memory Access
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#numa" class="md-nav__link">
    NUMA
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#operating-system-sperations-multitasking" class="md-nav__link">
    Operating System Sperations: Multitasking
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dual-mode-operation" class="md-nav__link">
    Dual-mode Operation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#process-management-activities" class="md-nav__link">
    Process Management Activities
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#thread" class="md-nav__link">
    Thread
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mmu-memory-management-unit" class="md-nav__link">
    MMU Memory Management Unit
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resource-management-file-system" class="md-nav__link">
    Resource Management File System
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resource-management-io-system-management" class="md-nav__link">
    Resource Management: I/O System Management
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#separate-policy-and-mechanism" class="md-nav__link">
    Separate Policy and Mechanism
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#è™šæ‹ŸåŒ–" class="md-nav__link">
    è™šæ‹ŸåŒ–
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#os-services--structures" class="md-nav__link">
    Os Services &amp; Structures
  </a>
  
    <nav class="md-nav" aria-label="Os Services & Structures">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cliguitouchscreen-interfacesvoice-command" class="md-nav__link">
    CLIï¼ŒGUIï¼ŒTouchscreen Interfacesï¼ŒVoice Command
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#system-calls" class="md-nav__link">
    System Calls
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#application-programming-interface" class="md-nav__link">
    Application Programming Interface
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#types-of-system-calls" class="md-nav__link">
    Types of System Calls
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c-è¯­è¨€ä¸­çš„-fork" class="md-nav__link">
    C è¯­è¨€ä¸­çš„ Fork
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#case-study-ioctl" class="md-nav__link">
    Case Study Ioctl
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#linkers--loaders" class="md-nav__link">
    Linkers &amp; Loaders
  </a>
  
    <nav class="md-nav" aria-label="Linkers & Loaders">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#åŠ¨æ€é“¾æ¥" class="md-nav__link">
    åŠ¨æ€é“¾æ¥
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#operating-system-structure" class="md-nav__link">
    Operating System Structure
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#process" class="md-nav__link">
    Process
  </a>
  
    <nav class="md-nav" aria-label="Process">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#process-state" class="md-nav__link">
    Process State
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#process-control-block-pcb" class="md-nav__link">
    Process Control Block PCB
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#thread_1" class="md-nav__link">
    Thread
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#process-creation" class="md-nav__link">
    Process Creation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#process-termination" class="md-nav__link">
    Process Termination
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#android-process-importance-hierarchy" class="md-nav__link">
    Android Process Importance Hierarchy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#interprocess-communication" class="md-nav__link">
    Interprocess Communication
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#remote-procedure-call-rpc" class="md-nav__link">
    Remote Procedure Call RPC
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#thread_2" class="md-nav__link">
    Thread
  </a>
  
    <nav class="md-nav" aria-label="Thread">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#thread-cancellation" class="md-nav__link">
    Thread Cancellation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#thread-specific-data--tls" class="md-nav__link">
    Thread Specific Data &amp; TLS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lightweight-process--scheduler-activities" class="md-nav__link">
    Lightweight Process &amp; Scheduler Activities
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#linux-thread" class="md-nav__link">
    Linux Thread
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#thread-library" class="md-nav__link">
    Thread Library
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#linux-thread_1" class="md-nav__link">
    Linux Thread
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cpu-scheduling" class="md-nav__link">
    CPU Scheduling
  </a>
  
    <nav class="md-nav" aria-label="CPU Scheduling">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-concepts" class="md-nav__link">
    Basic Concepts
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scheduling-criteria-è°ƒåº¦çš„å‡†åˆ™" class="md-nav__link">
    Scheduling Criteria è°ƒåº¦çš„å‡†åˆ™
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#algorithm-è°ƒåº¦çš„ç®—æ³•" class="md-nav__link">
    Algorithm è°ƒåº¦çš„ç®—æ³•
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#thread-scheduling" class="md-nav__link">
    Thread Scheduling
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multiple-processor-scheduling-å¤šå¤„ç†å™¨çš„è°ƒåº¦" class="md-nav__link">
    Multiple-processor Scheduling å¤šå¤„ç†å™¨çš„è°ƒåº¦
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-really-happened-on-mars" class="md-nav__link">
    What Really Happened on Mars
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#synchronization" class="md-nav__link">
    Synchronization
  </a>
  
    <nav class="md-nav" aria-label="Synchronization">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#race-condition" class="md-nav__link">
    Race Condition
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#critical-section" class="md-nav__link">
    Critical Section
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#solution-to-critical-section-three-requirements" class="md-nav__link">
    Solution to Critical-section: Three Requirements
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sequential-consistency-sc" class="md-nav__link">
    Sequential Consistency (SC)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hardware-instructions" class="md-nav__link">
    Hardware Instructions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#semaphore-ä¿¡å·é‡" class="md-nav__link">
    Semaphore ä¿¡å·é‡
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synchronization-examples" class="md-nav__link">
    Synchronization Examples
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="æ™ºäº‘è¯¾å ‚-è®¡ç®—æœºç³»ç»ŸäºŒ">[æ™ºäº‘è¯¾å ‚] è®¡ç®—æœºç³»ç»ŸäºŒ<a class="headerlink" href="#æ™ºäº‘è¯¾å ‚-è®¡ç®—æœºç³»ç»ŸäºŒ" title="Permanent link">&para;</a></h1>
<h2 id="course-infomation-and-policy">Course Infomation and Policy<a class="headerlink" href="#course-infomation-and-policy" title="Permanent link">&para;</a></h2>
<p>è¯¾å ‚ä¸Šä»¥ linux æ“ä½œç³»ç»Ÿä¸ºä¾‹ï¼Œå…·ä½“å®ç°æ–¹å¼è§†ä¸åŒæ“ä½œç³»ç»Ÿä¸ºå‡†ã€‚</p>
<h3 id="æ¨èä¹¦ç±">æ¨èä¹¦ç±<a class="headerlink" href="#æ¨èä¹¦ç±" title="Permanent link">&para;</a></h3>
<ul>
<li>Operating System Concepts - 10<sup>th</sup></li>
<li>Opearating System : Three Easy Pieces</li>
</ul>
<p>åœ¨è¿™ä¸¤æœ¬ä¹¦ä¹‹ä¸­ï¼Œè€å¸ˆæ›´æ¨èç¬¬äºŒæœ¬ä¹¦ã€‚ç¬¬ä¸€æœ¬ä¹¦ä¼šä»‹ç»å¾ˆå¤šä»¥å‰çš„è®¡ç®—æœºæ“ä½œç³»ç»Ÿåº”å½“å¦‚ä½•è¿›è¡Œè®¾è®¡çš„å†…å®¹ã€‚æ“ä½œç³»ç»Ÿæ˜¯ä¸ç¡¬ä»¶ç´§å¯†è€¦åˆçš„ï¼Œä½†æ˜¯å½“æ—¶çš„ç¡¬ä»¶ç³»ç»Ÿï¼Œåœ¨ä»Šå¤©æ¥çœ‹åªèƒ½å¾—çŸ¥ä¸€ä¸ªæ¦‚å¿µï¼Œè¿™ä½¿å¾—å­¦ä¹ éå¸¸å¾—è‚¤æµ…ï¼Œä¸èƒ½ make your hands dirtyï¼ˆè¿›è¡Œå®è·µï¼‰ã€‚è€Œç¬¬äºŒæœ¬ä¹¦ï¼Œä¸ä»…æ›´åŠ å‰æ²¿ï¼Œå¹¶ä¸”æ›´åŠ é€šä¿—æ˜“æ‡‚ã€‚</p>
<p>å®³ï¼Œè¿™é‡Œè€å¸ˆè¯´è™½ç„¶ä¸æ¨èç¬¬ä¸€æœ¬ä¹¦ï¼Œä½†è¿˜æ˜¯é€‰æ‹©åœ¨ç¬¬ä¸€æœ¬ä¹¦ä¸Šé€‰æ‹©é¢˜ç›®ï¼Œå› ä¸ºæœ‰äº›é¢˜ç›®é¢˜å‹è™½ç„¶æ— èŠï¼Œä½†æ˜¯ä¼šåœ¨è€ƒç ”é¢˜ç›®å‡ºç°ï¼Œä¸ºäº†é˜²æ­¢æˆ‘ä»¬åƒäºï¼Œè¿˜æ˜¯åœ¨è¿™æœ¬ä¹¦ä¸Šè¿›è¡Œå‡ºé¢˜ã€‚</p>
<p>ç‹¬ç«‹å®Œæˆå¹¶ä¸ä»£è¡¨è‡ªå·±é—·å¤´åšï¼Œä¸å’ŒåŒå­¦äº¤æµï¼Œä¸å‘ä»–äººæ±‚åŠ©ã€‚</p>
<p>å‘¨è€å¸ˆçš„è¿™äº›è§‚ç‚¹ï¼Œæˆ‘æ˜¯éå¸¸è®¤åŒçš„ï¼Œæˆ‘è‡ªå·±çš„å­¦ä¹ ç»å†å¾—å‡ºçš„æ˜¯åŒæ ·çš„ç»“è®ºã€‚</p>
<h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">&para;</a></h2>
<h3 id="operating-system-definition">Operating System Definition<a class="headerlink" href="#operating-system-definition" title="Permanent link">&para;</a></h3>
<p>Kernal å†…æ ¸ï¼Œis the program running at all times on the computerã€‚è¿è¡Œåœ¨ç‰¹æƒæ€ï¼Œç®¡ç†åˆ†é…ç¡¬ä»¶èµ„æºã€‚<code>è¿™é—¨è¯¾çš„â€˜æ“ä½œç³»ç»Ÿâ€™æ˜¯æŒ‡è¿™ä¸ªï¼Œè€Œä¸åŒ…æ‹¬ system program</code> æ“ä½œç³»ç»Ÿå­˜æ”¾åœ¨ disk ä¸Šï¼Œè¿è¡Œæ—¶è¢«åŠ è½½åˆ°å†…å­˜å½“ä¸­ï¼Œç”± CPU è¿›è¡Œæ‰§è¡Œã€‚</p>
<h3 id="hardware-components">Hardware Components<a class="headerlink" href="#hardware-components" title="Permanent link">&para;</a></h3>
<p>Direct Memory Access DMA éƒ¨ä»¶ã€‚å¯ä»¥ç›´æ¥æ§åˆ¶ memoryã€‚DMA å’Œ CPU éƒ½å¯ä»¥ç›´æ¥è®¿é—® memoryï¼Œè¿™å¯èƒ½ä¼šäº§ç”Ÿæ•°æ®ä¸ä¸€è‡´æ€§ã€‚è¿™ä¸ªæ•°æ®ä¸ä¸€è‡´æ€§å¯ä»¥ç”±ç¡¬ä»¶åè®®åŠ ä»¥è§£å†³ã€‚</p>
<h3 id="devices">Devices<a class="headerlink" href="#devices" title="Permanent link">&para;</a></h3>
<p>devices controller è®¾å¤‡æ§åˆ¶å™¨ã€‚æ¯ä¸€ä¸ªè®¾å¤‡æ§åˆ¶å™¨ä¼šå­˜åœ¨ä¸€ä¸ª local bufferã€‚I/O æ˜¯å‘ç”Ÿåœ¨ device å’Œè®¾å¤‡æ§åˆ¶å™¨çš„ buffer ä¹‹é—´çš„ã€‚CPU çš„æ•°æ®ç§»åŠ¨æ˜¯åœ¨ main memory å’Œè®¾å¤‡æ§åˆ¶å™¨çš„ buffer ä¹‹é—´ã€‚</p>
<p>CPU æƒ³è¦æ§åˆ¶ devices controllerï¼Œå¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼è¿›è¡Œæ“ä½œã€‚ç¬¬ä¸€ç§æ˜¯é€šè¿‡ç‰¹å®šçš„ io instructionï¼Œè¿™ç§æŒ‡ä»¤åä¾¿ä¼šè·Ÿ port çš„åœ°å€ã€‚è¿™æ˜¯ä¸€ç§ç°ä»£å¾ˆå°‘è§çš„æ–¹å¼ã€‚ä»Šå¤©çš„ä¸»æµæ–¹å¼æ˜¯ MMIOï¼ŒMemory map IO,å†…å­˜æ˜ å°„å‹ IO è®¿é—®ã€‚</p>
<h3 id="interrupts-and-traps">Interrupts and Traps<a class="headerlink" href="#interrupts-and-traps" title="Permanent link">&para;</a></h3>
<p>interrupt vector ä¸­æ–­å‘é‡ï¼Œä¸€ä¸ªç”± service routines åœ°å€ç»„æˆçš„è¡¨æ ¼ã€‚dispatch ä¸­æ–­åˆ†å‘ã€‚</p>
<p>interrupt handler ä¼šå­˜å‚¨è¢«ä¸­æ–­æ—¶å€™çš„çŠ¶æ€</p>
<p>trapã€‚ç±»ä¼¼äº system callï¼Œdevided-by-zero éƒ½ä¼šè§¦å‘ trapã€‚trap ä¹Ÿå¯ä»¥è¢«ç†è§£ä¸º soft-interruptï¼Œå³è½¯ä¸­æ–­ã€‚interrupt ä¸­æ–­ä¸åŠ å‰ç¼€è¯é€šå¸¸æŒ‡çš„æ˜¯ç¡¬ä¸­æ–­ã€‚trap ä¹Ÿå¯ä»¥è¢«å«åš exceptionã€‚</p>
<p>æ“ä½œç³»ç»Ÿæ˜¯ interrupt-driven çš„ã€‚æœ‰ä¸€ç§ä¸­æ–­ä¸º timer å®šæ—¶å™¨ä¸­æ–­ï¼Œæœ‰äº†å®šæ—¶å™¨ä¸­æ–­æ‰å¯ä»¥æœ‰å†…æ ¸ä»£ç çš„æ‰§è¡Œï¼Œè¿›è¡Œèµ„æºçš„è°ƒåº¦ã€‚</p>
<h3 id="interrupt-handling">Interrupt Handling<a class="headerlink" href="#interrupt-handling" title="Permanent link">&para;</a></h3>
<p>æœ‰ä¸¤ç§æ–¹å¼å¯ä»¥å¤„ç†ä¸­æ–­ã€‚polling å’Œ vectored interrupt systemã€‚</p>
<h3 id="io-from-system-call-to-devices-and-back">IO From System Call to Devices, and Back<a class="headerlink" href="#io-from-system-call-to-devices-and-back" title="Permanent link">&para;</a></h3>
<p>æ­¥éª¤å¤§è‡´ä¸ºå¦‚ä¸‹</p>
<ul>
<li>program è¿›è¡Œ system call è·å¾— system resources</li>
<li>æ“ä½œç³»ç»Ÿå‘é€ io requests<ul>
<li>io requests è¢«å‘é€ç»™ device driverï¼Œä¹‹åä¼šå‘é€ç»™ controller</li>
</ul>
</li>
<li>OS å¯èƒ½ä¼šè®©ç¨‹åºç­‰å¾… block,è¿™ç§æ–¹å¼å«åšåŒæ­¥ IOï¼Œä¹Ÿå¯èƒ½ç›´æ¥è¿”å›ç¨‹åºï¼Œè¿™ç§æ–¹å¼å«åšå¼‚æ­¥ IO</li>
<li>IO ç»“æŸï¼ŒIO æ§åˆ¶å™¨ interupt OS</li>
<li>OS å¤„ç† IO çš„ç»“æœï¼Œä¹‹å wakes up the programï¼Œæˆ–è€…å‘ç¨‹åºå‘é€ä¸€ä¸ª signal</li>
</ul>
<h3 id="dma-direct-memory-access">DMA Direct Memory Access<a class="headerlink" href="#dma-direct-memory-access" title="Permanent link">&para;</a></h3>
<p>DMA æ˜¯é«˜é€Ÿ IO è®¾å¤‡ç”¨æ¥ä¼ è¾“æ•°æ®çš„ï¼Œå¯ä»¥ä»¥ä¸€ç§æ¥è¿‘ memory speed çš„é€Ÿåº¦è¿›è¡Œ ioã€‚device driver ä¼šå‘é€ä¸€ä¸ª io descriptor ç»™ controllerã€‚è¿™ä¸ª io descriptor å†…éƒ¨å«æœ‰ operation type, memory address ä¹‹ç±»çš„ä¿¡æ¯ã€‚controller å¯ä»¥é€šè¿‡ DMAï¼Œç›´æ¥åœ¨ local buffer å’Œ main memory ä¹‹é—´è¿›è¡Œæ•°æ®è½¬ç§»ï¼Œè€Œä¸éœ€è¦ CPU interventionã€‚</p>
<p>å¯èƒ½ä¼šå­˜åœ¨ç¼“å­˜ä¸€è‡´æ€§é—®é¢˜ã€‚IO MMU input/output memory management unit, ç”¨æ¥è¡¨ç¤º physical memory æ˜¯æš´éœ²ç»™ dma çš„ã€‚</p>
<h3 id="numa">NUMA<a class="headerlink" href="#numa" title="Permanent link">&para;</a></h3>
<p>Non-Uniform memory access systemã€‚æ¯ä¸€ä¸ª cpu éƒ½æœ‰è‡ªå·±çš„ physical memoryï¼Œä½†æ˜¯ memory çš„åœ°å€æ˜¯åŒä¸€ç¼–å€çš„ã€‚</p>
<h3 id="operating-system-sperations-multitasking">Operating System Sperations: Multitasking<a class="headerlink" href="#operating-system-sperations-multitasking" title="Permanent link">&para;</a></h3>
<p>ä¹Ÿè¢«ç§°ä¸º timesharingã€‚å°±æ˜¯æŠŠ CPU çš„è¿è¡Œåˆ†ä¸ºæ—¶é—´ç‰‡ï¼Œæ¯ä¸ªæ—¶é—´ç‰‡åˆ†é…ç»™ä¸åŒçš„ jobsã€‚</p>
<h3 id="dual-mode-operation">Dual-mode Operation<a class="headerlink" href="#dual-mode-operation" title="Permanent link">&para;</a></h3>
<p>dual-mode å°±æ˜¯åˆ†ä¸ºäº† user mode å’Œ kernal mode<br />
system call ä¼šå°† mode è½¬æ¢ä¸º kernel çŠ¶æ€</p>
<p>risc-v å½“ä¸­å­˜åœ¨ä¸‰ç§æ¨¡å¼ï¼Œuser æ¨¡å¼ã€‚s æ¨¡å¼ï¼Œè¿™æ˜¯å†…æ ¸è¿è¡Œçš„æ¨¡å¼ã€‚M æ¨¡å¼ï¼Œè¿™æ˜¯ç³»ç»Ÿåˆšèµ·æ¥æ—¶è¿è¡Œçš„å›ºä»¶ä»£ç ã€‚</p>
<h3 id="process-management-activities">Process Management Activities<a class="headerlink" href="#process-management-activities" title="Permanent link">&para;</a></h3>
<p>è¿›ç¨‹æ˜¯å¤„äºè¿è¡ŒçŠ¶æ€çš„ programã€‚ç¨‹åº program ä¸ºåœ¨å­˜å‚¨ä¸Šå¯æ‰§è¡Œçš„ä¸€æ®µæ–‡ä»¶ã€‚
è¿›ç¨‹æ˜¯èµ„æºåˆ†é…çš„æœ€å°å•å…ƒï¼Œçº¿ç¨‹æ˜¯è°ƒåº¦çš„æœ€å°å•å…ƒã€‚</p>
<p><img alt="" src="../../img/9506c1b4b0f20d2495bc1f316c25fa5d_MD5.png" /></p>
<h3 id="thread">Thread<a class="headerlink" href="#thread" title="Permanent link">&para;</a></h3>
<p>çº¿ç¨‹ã€‚ä¸åŒè¿›ç¨‹ä¹‹é—´å¯ä»¥é€šè¿‡æ“ä½œç³»ç»Ÿæä¾›çš„è¿›ç¨‹ä¹‹é—´äº¤æµçš„åŸè¯­ï¼Œæˆ–è€…å…±äº«å†…å­˜çš„æ–¹å¼å®ç°æ•°æ®çš„å…±äº«ï¼Œä½†æ˜¯å­˜åœ¨é—®é¢˜ï¼šå¼€é”€è¿‡å¤§ã€‚</p>
<p>é€šè¿‡ multi-threaded processï¼Œä½¿å¾—æ¯ä¸ª thread éƒ½å…·æœ‰ä¸€ä¸ª program counterã€‚æ¯ä¸€ä¸ªçº¿ç¨‹å¯ä»¥è¢«å•ç‹¬çš„è°ƒåº¦ï¼Œå¹¶ä¸”å¼€é”€èµ„æºå°ã€‚å¤šä¸ªçº¿ç¨‹å…±äº«è¿™ä¸ªè¿›ç¨‹çš„æ•°æ® memory, global data, heap å’Œä»£ç ã€‚æ³¨æ„ pc å’Œ stack æ˜¯ä¸å…±äº«çš„ï¼ˆè™½ç„¶ stack å¹¶ä¸æ˜¯éš”ç¦»çš„ï¼‰ã€‚</p>
<p>â‘ å¯è¢«è°ƒåº¦çš„æœ€å°åŸºæœ¬å•å…ƒæ”¹ä¸ºäº†çº¿ç¨‹ã€‚
â‘¡è¿›ç¨‹æ˜¯èµ„æºå…±äº«çš„æœ€å°åŸºæœ¬å•å…ƒã€‚</p>
<p>CPU å¤„äºç©ºé—²çŠ¶æ€æ—¶ï¼Œä¼šè¿è¡Œå†…æ ¸çŠ¶æ€ä¸­ä¸€æ®µç‰¹æ®Šçš„ä»£ç ã€‚ï¼ˆå¯ä»¥ç®€åŒ–ç†è§£ä¸º while 1ï¼Œè™½ç„¶å¹¶ä¸æ˜¯ï¼‰</p>
<h3 id="mmu-memory-management-unit">MMU Memory Management Unit<a class="headerlink" href="#mmu-memory-management-unit" title="Permanent link">&para;</a></h3>
<p>MMU å¯ä»¥åœ¨è™šæ‹Ÿå†…å­˜å’Œå®é™…å†…å­˜ä¹‹é—´åˆ›å»ºä¸€ä¸ªæ˜ å°„è¡¨ã€‚</p>
<h3 id="resource-management-file-system">Resource Management File System<a class="headerlink" href="#resource-management-file-system" title="Permanent link">&para;</a></h3>
<p>ä¸æ€ä¹ˆæ¶‰åŠã€‚</p>
<h3 id="resource-management-io-system-management">Resource Management: I/O System Management<a class="headerlink" href="#resource-management-io-system-management" title="Permanent link">&para;</a></h3>
<p>åˆ†æˆä¸‰ä¸ªæ­¥éª¤ï¼šbufferingï¼Œcachingï¼ˆå°†å†…å®¹ä» storage ä¸­è¯»å‡ºæ”¾å…¥ å†…å­˜ä¸­ï¼‰ï¼Œspooling(ä¸åŒå¤–è®¾çš„è¾“å…¥è¾“å‡ºå¯ä»¥ç›¸æ¥)ã€‚</p>
<p>æ“ä½œç³»ç»Ÿä¼šæä¾›è®¾å¤‡é©±åŠ¨ç¨‹åºã€‚</p>
<p>æ‰‹æœºä¸Šï¼Œå°†ä¸åŒçš„ç”¨æˆ·çš„ç”¨æˆ· ID è®¾ç½®ä¸ºä¸ä¸€æ ·ï¼Œå†åŠ ä¸Šè®¾å®šç‰¹å®šçš„ access controlï¼Œå¯ä»¥ä½¿å¾—è¿›ç¨‹ä¹‹é—´æ–‡ä»¶çš„éš”ç¦»ã€‚</p>
<h3 id="separate-policy-and-mechanism">Separate Policy and Mechanism<a class="headerlink" href="#separate-policy-and-mechanism" title="Permanent link">&para;</a></h3>
<p>Mechanism: how question about a systemã€‚å¦‚ä½•å®Œæˆä¸Šä¸‹æ–‡çš„åˆ‡æ¢ã€‚</p>
<p>Policy: which questionã€‚å“ªä¸ªè¿›ç¨‹åº”å½“è¢«åˆ‡æ¢è¿›æ¥ã€‚</p>
<h3 id="è™šæ‹ŸåŒ–">è™šæ‹ŸåŒ–<a class="headerlink" href="#è™šæ‹ŸåŒ–" title="Permanent link">&para;</a></h3>
<p>ä½¿å¾—è¿›ç¨‹è®¤ä¸ºè‡ªå·±å®Œæ•´æ‹¥æœ‰ç¡¬ä»¶èµ„æºã€‚</p>
<p>Abstractthe hardware of a single computer (CPU/Memory/IOâ€¦) into different environmentsã€‚</p>
<h2 id="os-services--structures">Os Services &amp; Structures<a class="headerlink" href="#os-services--structures" title="Permanent link">&para;</a></h2>
<p>æ‰€è°“çš„ services å°±æ˜¯æŒ‡æ“ä½œç³»ç»Ÿå‘ç”¨æˆ·ç¨‹åºæä¾›äº†ä»€ä¹ˆæœåŠ¡</p>
<ul>
<li>User Interface ç”¨æˆ·æ¥å£ï¼ŒUI</li>
<li>program execution</li>
<li>IO operation</li>
<li>file-system manipulation</li>
<li>communication</li>
<li>error detection</li>
<li>resource allocation</li>
<li>accounting/logging</li>
<li>protection and security</li>
</ul>
<h3 id="cliguitouchscreen-interfacesvoice-command">CLIï¼ŒGUIï¼ŒTouchscreen Interfacesï¼ŒVoice Command<a class="headerlink" href="#cliguitouchscreen-interfacesvoice-command" title="Permanent link">&para;</a></h3>
<p>å‘½ä»¤è¦ä¹ˆæ˜¯ built-in çš„ï¼Œè¦ä¹ˆæ˜¯å…¶ä»– program çš„åå­—</p>
<p>fork ä¼šåˆ›å»ºå­è¿›ç¨‹ï¼Œfork ä¼šè¿”å›ä¸¤æ¬¡</p>
<p>Touchscreen Interfaces ä¼šå­˜åœ¨å®‰å…¨éšæ‚£ clickjacking ç‚¹å‡»åŠ«æŒï¼Œå åŠ ä¸¤ä¸ªç”¨æˆ·äº¤äº’çš„ç•Œé¢ï¼Œå åŠ åœ¨ä¸Šå±‚çš„ç•Œé¢æ˜¯æ¶æ„è½¯ä»¶çš„ï¼Œåå±‚æ˜¯ç‰¹å®šæŒ‰é’®ã€‚ç‚¹å‡»åè§¦å‘çš„æ˜¯åå±‚çš„æŒ‰é’®ã€‚</p>
<h3 id="system-calls">System Calls<a class="headerlink" href="#system-calls" title="Permanent link">&para;</a></h3>
<p>ä¸€ä¸ª programming æ¥å£ï¼Œç”¨æ¥ access æ“ä½œç³»ç»Ÿçš„æœåŠ¡</p>
<h3 id="application-programming-interface">Application Programming Interface<a class="headerlink" href="#application-programming-interface" title="Permanent link">&para;</a></h3>
<p>APIï¼Œç¨‹åºé€šå¸¸ä¸æ˜¯ç›´æ¥è¿›è¡Œç³»ç»Ÿè°ƒç”¨ï¼Œè€Œæ˜¯è°ƒç”¨ APIï¼Œå¯ä»¥çœ‹åšæ˜¯å¯¹ç³»ç»Ÿè°ƒç”¨è¿›è¡Œäº†å°è£…</p>
<p>libc ç³»ç»Ÿåº“å°±æä¾›äº†å„ç§ APIã€‚API éšè—äº†å¾ˆå¤šç³»ç»Ÿè°ƒç”¨çš„ç»†èŠ‚ã€‚</p>
<p>Systemcall ç”±å†…æ ¸ä¸­çš„å¼‚å¸¸å¤„ç†ç¨‹åºè¿›è¡Œã€‚ä¸åŒçš„ç³»ç»Ÿè°ƒç”¨æ˜¯ç”±ç³»ç»Ÿè°ƒç”¨å·è¿›è¡ŒåŒºåˆ†çš„ï¼ŒåŒæ ·çš„ç³»ç»Ÿè°ƒç”¨åœ¨ä¸åŒçš„æ¶æ„ä¸‹è¾¹ç³»ç»Ÿè°ƒç”¨å·å¯èƒ½æ˜¯ä¸åŒçš„ï¼Œä¸€ä¸ªç³»ç»Ÿå·åœ¨ä¸€ä¸ªæ¶æ„ä¸‹ç¡®å®šäº†çš„è¯ï¼Œé‚£ä¹ˆåŸºæœ¬æ˜¯ä¸ä¼šå‘ç”Ÿæ”¹å˜çš„ã€‚[ç³»ç»Ÿè°ƒç”¨å·] å¦‚ä½•ä¼ é€’åˆ°å†…æ ¸ï¼Ÿè¿™é‡Œå­˜åœ¨å¤šç§æ–¹å¼ã€‚â‘ å¯ä»¥é€šè¿‡å¯„å­˜å™¨è¿›è¡Œä¼ é€’ï¼Œå¼‚å¸¸å¤„ç†ç¨‹åºè¿›è¡Œåˆ†å‘çš„æ—¶å€™åˆ™çœ‹ä¼ è¿›æ¥çš„å‚æ•°çš„å€¼ã€‚è¿™æ˜¯ä»Šå¤©æ¯”è¾ƒå¤šçš„ä¸€ç§å®ç°æ–¹å¼ã€‚â‘¡æœºå™¨æŒ‡ä»¤å¯ä»¥å¸¦æ“ä½œæ•°ã€‚</p>
<p>ç³»ç»Ÿè°ƒç”¨å‚æ•°çš„ä¼ é€’å¯ä»¥é€šè¿‡ â‘  registerã€‚ç¼ºç‚¹æ˜¯å¯„å­˜å™¨çš„ä¸ªæ•°å’Œå¤§å°éƒ½æ˜¯å›ºå®šçš„ã€‚â‘¡ block ä¼ é€’ä¸€è¿å—å†…å­˜ï¼Œå†…å­˜çš„åœ°å€é€šè¿‡å¯„å­˜å™¨ä¼ é€’ â‘¢ stackã€‚æ‰¯å¼€ï¼špush å’Œ pop æŒ‡ä»¤æ˜¯ä¼ªæŒ‡ä»¤ï¼Œç¼–è¯‘å™¨ä¼šæ›¿æ¢ä¸ºçœŸæ­£çš„æœºå™¨æŒ‡ä»¤ã€‚ä»Šå¤©çš„ cpu å†…éƒ¨è¿˜çœŸä»–å¦ˆæœ‰ç¡¬ä»¶æ ˆï¼Œhardware stackï¼Œåªä¸è¿‡å…¶æ˜¯é€æ˜çš„ï¼Œä¼šè‡ªåŠ¨ä¿å­˜ä¸€ä»½å…³é”®å€¼åˆ°ç¡¬ä»¶æ ˆä¸­ï¼Œå¦‚è¿”å›åœ°å€ä¸€ç±»ã€‚return æŒ‡ä»¤æ—¶ç¡¬ä»¶å±‚é¢ä¼šæ¯”è¾ƒå½±å­æ ˆä¸­çš„è¿”å›åœ°å€å’Œå½“å‰è¿”å›æ˜¯å¦ä¸€è‡´ã€‚</p>
<h3 id="types-of-system-calls">Types of System Calls<a class="headerlink" href="#types-of-system-calls" title="Permanent link">&para;</a></h3>
<ul>
<li>process control æ“ä½œç³»ç»Ÿå†…æ ¸åœ¨è¢«å¼•å¯¼å®Œåï¼Œä¼šä¸»åŠ¨åˆ›å»ºå‡ºä¸€ä¸ªè¿›ç¨‹å·ä¸º 1 çš„è¿›ç¨‹ã€‚ä¼šå­˜åœ¨ä¸€ä¸ªè¿›ç¨‹æ ‘ã€‚<code>kill -9 pid</code>ï¼Œç»ˆæ­¢è¿›ç¨‹ã€‚load executeï¼ŒåŠ è½½æ–°çš„ã€‚</li>
<li>file managment</li>
<li>information maintenanceã€‚getpid æ‰€éœ€è¦çš„å…·ä½“èŠ±è´¹å¾ˆå°ï¼Œå¾ˆå¤§çš„å¼€é”€æ”¾åœ¨äº†ä¸Šä¸‹æ–‡çš„åˆ‡æ¢ï¼Œå› æ­¤ç»å¸¸ç”¨ getpid æ¥æµ‹è¯•ä¸Šä¸‹æ–‡åˆ‡æ¢çš„ç³»ç»Ÿå¼€é”€ã€‚</li>
<li>communicationsã€‚è¿›ç¨‹å’Œè¿›ç¨‹ä¹‹é—´å…±äº« memoryã€‚é»˜è®¤æ—¶ï¼Œè¿›ç¨‹å’Œè¿›ç¨‹ä¹‹é—´çš„å†…å­˜ç©ºé—´æ˜¯ç›¸äº’éš”ç¦»çš„ï¼Œç”±äºæ“ä½œç³»ç»Ÿåšäº†å†…å­˜è™šæ‹ŸåŒ–ã€‚</li>
<li>protection</li>
</ul>
<h3 id="c-è¯­è¨€ä¸­çš„-fork">C è¯­è¨€ä¸­çš„ Fork<a class="headerlink" href="#c-è¯­è¨€ä¸­çš„-fork" title="Permanent link">&para;</a></h3>
<p>æ„é€ ä¸€ä¸ªå­è¿›ç¨‹ï¼Œå­è¿›ç¨‹æ˜¯çˆ¶è¿›ç¨‹çš„ç²¾ç¡®æ‹·è´ï¼Œä½†æ˜¯ pid = fork () è¿™é‡Œçš„ pid å¹¶ä¸ä¼šè¢«æ‹·è´ï¼Œå› æ­¤å¯ä»¥é€šè¿‡åˆ¤æ–­ pid æ¥åˆ¤æ–­å½“å‰å¤„äºçˆ¶è¿›ç¨‹è¿˜æ˜¯å­è¿›ç¨‹ã€‚fork() ä¼šè¿”å›ä¸¤æ¬¡ï¼Œå¯¹äºçˆ¶è¿›ç¨‹ï¼Œå…¶è¿”å›çš„å€¼ä¸º pidï¼Œå¯¹äºå­è¿›ç¨‹ï¼Œå…¶è¿”å›çš„å€¼ä¸º 0ã€‚wait() æ˜¯çˆ¶è¿›ç¨‹ç­‰å¾…å­è¿›ç¨‹çš„å®Œæˆã€‚</p>
<p>lic.so æ˜¯åŠ è½½çš„åŠ¨æ€åº“ï¼ŒåŠ¨æ€é“¾æ¥æ—¶å¹¶ä¸åœ¨å¯¹åº”çš„å¯æ‰§è¡Œæ–‡ä»¶ä¹‹ä¸­ã€‚</p>
<h3 id="case-study-ioctl">Case Study Ioctl<a class="headerlink" href="#case-study-ioctl" title="Permanent link">&para;</a></h3>
<p>ioctl å¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªé€šç”¨çš„æ¥å£ã€‚</p>
<h3 id="linkers--loaders">Linkers &amp; Loaders<a class="headerlink" href="#linkers--loaders" title="Permanent link">&para;</a></h3>
<p>loader æ˜¯åŠ è½½å™¨ï¼Œæ˜¯ from program to process</p>
<p>åœ¨è¿è¡Œæ—¶ä¼šæœ‰åŠ¨æ€é“¾æ¥è¿‡ç¨‹ã€‚</p>
<p>é€šè¿‡é™æ€é“¾æ¥æ–¹å¼ï¼Œåˆ™ä»£ç éƒ½ä¼šè¢«åµŒå…¥åˆ°æœ€ç»ˆçš„å¯æ‰§è¡Œæ–‡ä»¶å†…éƒ¨ã€‚å¥½å¤„æ—¶è‡ªåŒ…å«ï¼Œä¸ä¾èµ–äºç³»ç»Ÿåº“ä»£ç ã€‚ç¼ºç‚¹æ˜¯å¯æ‰§è¡Œæ–‡ä»¶å¤§å°éå¸¸å¤§ï¼ŒåŠ è½½çš„æ—¶å€™ä¼šæ¯”è¾ƒæ…¢ã€‚é™æ€é“¾æ¥åœ¨ä¸åŒçš„è¿›ç¨‹ä¹‹é—´å¾ˆéš¾å…±äº«ç³»ç»Ÿä»£ç ã€‚å³å†…å­˜ä¸­å¯èƒ½ä¼šå­˜åœ¨ printfï¼ˆï¼‰çš„å®Œæ•´å®ç°çš„å¤šä»½æ‹·è´ã€‚</p>
<h4 id="åŠ¨æ€é“¾æ¥">åŠ¨æ€é“¾æ¥<a class="headerlink" href="#åŠ¨æ€é“¾æ¥" title="Permanent link">&para;</a></h4>
<p><img alt="" src="../../img/38011066ff9565db6d52f8c5d434133f_MD5.png" />  </p>
<p>å¯ä»¥çœ‹åˆ°è°ƒç”¨ printf çš„æ—¶å€™ä¼šè·³è½¬åˆ° 488 å¤„ã€‚åšäº†ä¸¤æ¬¡ add çš„æ“ä½œï¼Œç¬¬ä¸€æ¬¡ add æ˜¯å°†å½“å‰å¯„å­˜å™¨çš„å€¼æ”¾åˆ° ip å¯„å­˜å™¨å†…éƒ¨ã€‚ç¬¬äºŒæ¬¡ add æ˜¯å°† ip åŠ ä¸Šäº†ä¸€ä¸ªå¸¸æ•°ã€‚ç¬¬ä¸‰æ¬¡æ“ä½œåˆ™æ˜¯åšäº†ä¸€æ¬¡é—´æ¥è·³è½¬ï¼Œå°† ip åŠ ä¸Š 2904 å¤„çš„å€¼ï¼Œæ”¾ç½®åˆ° pc ä¹‹ä¸­ã€‚è¿™ä¹ˆè¯´æ¥åœ¨ 0x2fe8 ä¹‹ä¸­ï¼Œå°±åº”è¯¥æ˜¯ printf å‡½æ•°åœ¨è¿è¡Œæ—¶åœ¨å†…å­˜ä¸­çš„å€¼ã€‚</p>
<p>å°† printf å‡½æ•°çš„åœ°å€ï¼Œå¡«åˆ° 0x2fe8 è¿™ä»¶äº‹ï¼Œä¸€ç§åšæ³•æ˜¯æ˜¯ç”±åŠ è½½å™¨åŠ è½½å¯æ‰§è¡Œæ–‡ä»¶æ—¶å³å®Œæˆï¼ŒELF æ–‡ä»¶ä¼šè¡¨æ˜è‡ªå·±ä¾èµ–äºå“ªäº›ç³»ç»Ÿåº“ã€‚åŠ è½½å™¨ä¼šæ ¹æ®åº“æ–‡ä»¶æ‰€åœ¨çš„è·¯å¾„ï¼Œå°† libc åŠ è½½åˆ°å†…å­˜ä¹‹ä¸­ã€‚è¿˜éœ€è¦å°† libc ä¸­ printf çš„åœ°å€æ”¾åˆ° 0x2fe8 ä¹‹ä¸­ã€‚è¿™é‡Œå¯ä»¥ä½œè¯é“¾æ¥æ—¶å€™çš„è¡Œä¸ºä¼šæ”¹å˜åŠ è½½æ—¶å€™çš„è¡Œä¸ºã€‚</p>
<p>å½“ç„¶è¿˜æœ‰ä¸€ç§ å»¶è¿Ÿç»‘å®š lazy binding çš„æ–¹æ³•ï¼Œå°†æ›´æ”¹ 0x2fe8 å¤„çš„å€¼è¿™ä»¶äº‹æ”¾åˆ°çœŸæ­£è°ƒç”¨ printf æ—¶å†å»æ‰§è¡Œã€‚è¿™æ ·å¯ä»¥åœ¨åˆ†æ”¯æƒ…å†µä¸‹åˆç†çš„è¿›è¡Œã€‚</p>
<p>åŠ¨æ€é“¾æ¥ä½¿å¾—â‘ å¯æ‰§è¡Œæ–‡ä»¶çš„å¤§å°å¤§é‡åœ°å‡å°‘äº†ã€‚â‘¡å¹¶ä¸”èƒ½å¤Ÿæ¯”è¾ƒå¥½çš„åœ¨ä¸åŒçš„è¿›ç¨‹ä¹‹é—´å…±äº«ç³»ç»Ÿåº“ã€‚æˆ‘ä»¬å¯ä»¥çŸ¥é“è™šæ‹Ÿå†…å­˜å­˜åœ¨æ˜ å°„ï¼Œå› æ­¤åªéœ€è¦è°ƒæ•´æ˜ å°„å…³ç³»å³å¯ï¼Œå¯ä»¥åœ¨å®é™…å†…å­˜ä¸­åªä¿ç•™ä¸€ä»½ libcã€‚</p>
<p>å¯ä»¥é€šè¿‡å‡½æ•°è¿è¡Œæ—¶ç­‰æ–¹å¼æ©ç›–ç¨‹åºå¯¹ OS çš„ä¾èµ–ã€‚æ‰€è°“çš„è¿è¡Œæ—¶ï¼Œå°±æ˜¯æŒ‡ä¸€ç§è™šæ‹Ÿæœºï¼Œæœ€ç»ˆæ˜¯ç”± è™šæ‹Ÿæœº æ¥æ‰§è¡Œçš„ã€‚è™šæ‹Ÿæœºä¼šåˆ¤æ–­ç¯å¢ƒï¼Œå®ç°è‡ªå·±çš„å®ç°ã€‚</p>
<h3 id="operating-system-structure">Operating System Structure<a class="headerlink" href="#operating-system-structure" title="Permanent link">&para;</a></h3>
<p>æ–°è®¾è®¡æ“ä½œç³»ç»Ÿå†…æ ¸ï¼Œå¦‚ä½•ç»„ç»‡ä¼šæ›´åŠ åˆç†ã€‚</p>
<p>æœºåˆ¶ mechanismï¼šå¦‚ä½•ä¿å­˜ä¸Šä¸‹æ–‡è¿›è¡Œåˆ‡æ¢<br />
ç­–ç•¥ policyï¼šä¸‹ä¸€ä¸ªè¦è¢«è°ƒåº¦çš„è¿›ç¨‹æ˜¯ä»€ä¹ˆ</p>
<p>æ•´ä½“å†…æ ¸ï¼šä¼šåˆ†æˆç”¨æˆ·æ€å’Œå†…ç‰¹æ€ã€‚å†…æ ¸ä¸­çš„å„ä¸ªæ¨¡å—æ˜¯æ··æ‚åœ¨ä¸€èµ·çš„ï¼Œæ²¡æœ‰æ˜æ˜¾çš„ç•Œé™ï¼Œå¯ä»¥è·¨è¶Š layer è¿›è¡Œè°ƒç”¨ã€‚</p>
<p>å¾®å†…æ ¸ï¼šè¦ä½¿å¾—åœ¨å†…æ ¸æ€è¿è¡Œçš„ä»£ç è¶Šå°‘è¶Šå¥½ã€‚è¿™æ ·å¯ä»¥å‡å°‘ bugã€‚å¯é æ€§ï¼Œå®‰å…¨æ€§ï¼Œç§»æ¤éƒ½å¾ˆæ–¹ä¾¿ã€‚ç¼ºç‚¹ï¼šæ€§èƒ½å¼€é”€è¿‡å¤§ï¼Œç±»ä¼¼äºæ–‡ä»¶ç³»ç»Ÿä¹‹ç±»çš„ï¼Œä¼ é€’æ•°æ®ç»™ç”¨æˆ·æ€ç¨‹åºï¼Œè¿”å›ç»™ç”¨æˆ·æ€ç¨‹åºéƒ½éœ€è¦è¿›è¡Œä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚</p>
<p>å¤–å†…æ ¸ï¼šåœ¨ kernal mode åªå®ç°éå¸¸è–„çš„ os åŠŸèƒ½ã€‚å…·ä½“çš„ç¡¬ä»¶å¦‚ä½•è®¿é—®äº¤ç»™ç”¨æˆ·æ€ç¨‹åºæ¥æŠ‰æ‹©ã€‚</p>
<p><img alt="" src="../../img/15633368f9db5a9ea9d9012da29c54df_MD5.png" /></p>
<h2 id="process">Process<a class="headerlink" href="#process" title="Permanent link">&para;</a></h2>
<p>è¿›ç¨‹çš„å†…å­˜å¸ƒå±€ã€‚æ³¨æ„è¿™é‡Œ heap çš„æ—¶å€™ï¼Œæ˜¯ libc å…ˆå‘æ“ä½œç³»ç»Ÿå£°æ˜ï¼Œè¡¨æ˜ libc éœ€è¦ä¸€å—åœ°å€ã€‚å‡½æ•°ä¼šè°ƒç”¨ malloc ç­‰ libc çš„å‡½æ•°ï¼Œæ˜¯ libc ä»è‡ªå·±å·²ç»å£°æ˜è¿‡äº†çš„åœ°å€ç©ºé—´åˆ†é…ä¸€å—äº¤ç»™å‡½æ•°ã€‚è¿™é‡Œéœ€è¦è¯´æ˜çš„æœ‰ä¸¤ç‚¹ã€‚ä¸€æ˜¯ libc å‘æ“ä½œç³»ç»Ÿå£°æ˜éœ€è¦ç©ºé—´çš„æ—¶å€™ï¼Œæ“ä½œç³»ç»Ÿä¸ä¼šçœŸçš„å°±ç›´æ¥åˆ†é…è¿™ä¹ˆå¤šå†…å­˜ç»™ libcï¼Œè€Œæ˜¯é€šè¿‡è®°è´¦çš„æ–¹å¼ã€‚äºŒæ˜¯è™½ç„¶åœ¨å‡½æ•°çœ‹æ¥å®ƒç‹¬å äº†å†…å­˜åœ°å€ç©ºé—´ï¼Œä½†åªæœ‰å‘ libc ç”³è¯·è¿‡çš„ç³»ç»Ÿç©ºé—´æ‰æ˜¯å¯ä»¥æ­£ç¡®çš„ã€‚</p>
<p><img alt="" src="../../img/d5142508bda8fd7ae4c92a9e579716db_MD5.png" /></p>
<h3 id="process-state">Process State<a class="headerlink" href="#process-state" title="Permanent link">&para;</a></h3>
<p><img alt="" src="../../img/c7f7c5e836c975f4617a2f3223e8ce39_MD5.png" /></p>
<h3 id="process-control-block-pcb">Process Control Block PCB<a class="headerlink" href="#process-control-block-pcb" title="Permanent link">&para;</a></h3>
<p>ä½ ä¹‹æ‰€ä»¥è§‰å¾— PCB éå¸¸è€³ç†Ÿï¼Œæ˜¯å› ä¸ºç”µè·¯æ¿ã€‚
å†…æ ¸ä¹Ÿæ˜¯ä¸€ç§ç¨‹åºï¼Œå› æ­¤å†…æ ¸çš„è¿è¡Œä¹Ÿæ˜¯éœ€è¦ CPU èµ„æºçš„ã€‚</p>
<p>è¿›ç¨‹çš„ä¸Šä¸‹æ–‡æ˜¯ä¿å­˜åœ¨å†…æ ¸çš„ PCB ç»“æ„ä½“å½“ä¸­çš„ã€‚PCB æ˜¯å†…æ ¸ç”¨æ¥ç»´æŠ¤è¿›ç¨‹çš„ä¸€ä¸ªç»“æ„ã€‚PCB æ˜¯ä¸€ç§é€»è¾‘æ¦‚å¿µã€‚</p>
<p>TODO: PCB æœ‰ä»€ä¹ˆä¸œè¥¿æ‰“ä¸ªè‰ç¨¿ã€‚</p>
<h3 id="thread_1">Thread<a class="headerlink" href="#thread_1" title="Permanent link">&para;</a></h3>
<p>CPU è°ƒåº¦å™¨æ˜¯å†…æ ¸çš„æ¦‚å¿µã€‚</p>
<p><strong>swap in/out</strong><br />
è§£å†³äº†ç‰©ç†å†…å­˜å¯èƒ½çš„ä¸å¤Ÿç”¨çš„åœºæ™¯ã€‚æŠŠä¸€ä¸ªè¿›ç¨‹ç”¨åˆ°çš„ä¸€äº›å€¼æ”¾åˆ° storge ä¸­ã€‚å½“ç„¶è¿™é‡Œä¸ä¸€å®šæ˜¯ hard diskï¼Œå› ä¸º hard disk çš„è®¿é—®å®åœ¨æ˜¯å¤ªæ…¢äº†ã€‚è€Œæ˜¯ swap åˆ†åŒºä¸­ã€‚swap out æ˜¯æŒ‡å°†è¿›ç¨‹å ç”¨çš„å†…å­˜èµ„æºä»ç‰©ç†å†…å­˜ä¸­é‡Šæ”¾ï¼Œå°†å…¶æ”¾åˆ° swap åˆ†åŒºå½“ä¸­ï¼Œè€Œ swap in åˆ™æ˜¯å°†è¿›ç¨‹ä¿å­˜åœ¨ swap åˆ†åŒºä¸­çš„å†…å­˜é‡æ–°ä¿å­˜åˆ°ç‰©ç†å†…å­˜ä¹‹ä¸­ã€‚ç°ä»£æ“ä½œç³»ç»Ÿä¼š monitor å½“å‰çš„å†…å­˜å‹åŠ›ï¼Œå½“è§‰å¾—å‹åŠ›å¤§çš„æ—¶å€™ï¼Œä¼šé€‰æ‹©ä¸å¤ªä¼šè¢«è°ƒåº¦çš„è¿›ç¨‹çš„ä¸å¤ªä¼šè¢«ä½¿ç”¨çš„ <strong>å†…å­˜é¡µ</strong> æ”¾å‡ºå»ã€‚</p>
<p>ABI å®šä¹‰äº†å‡½æ•°è°ƒç”¨æ—¶å‚æ•°å¦‚ä½•ä¼ é€’ï¼ˆæ ˆï¼Œå¯„å­˜å™¨ï¼Œblockï¼Œå‚æ•°è¾ƒå¤šæ—¶ï¼‰ï¼Œä»¥åŠè¿”å›æ—¶å¦‚ä½•è¿”å›ã€‚</p>
<h3 id="process-creation">Process Creation<a class="headerlink" href="#process-creation" title="Permanent link">&para;</a></h3>
<p>ç³»ç»Ÿå†…éƒ¨æ‰€æœ‰çš„è¿›ç¨‹ä¼šå½¢æˆä¸€ä¸ªè¿›ç¨‹æ ‘ã€‚</p>
<h3 id="process-termination">Process Termination<a class="headerlink" href="#process-termination" title="Permanent link">&para;</a></h3>
<p>exitï¼šå®Œæˆæœ€åä¸€æ¡è¯­å¥åï¼Œè¯·æ±‚å†…æ ¸å…³é—­<br />
abortï¼šçˆ¶è¿›ç¨‹ç»ˆç»“å­è¿›ç¨‹<br />
åœ¨ linux ä¸­ï¼Œå…è®¸çˆ¶è¿›ç¨‹ç»“æŸåï¼Œå­è¿›ç¨‹ä»ç„¶å­˜åœ¨ã€‚è¿™ä¼šä½¿å¾—å­˜åœ¨åƒµå°¸è¿›ç¨‹å’Œå­¤å„¿è¿›ç¨‹ã€‚å­è¿›ç¨‹ç»“æŸåï¼Œéœ€è¦ç­‰å¾…çˆ¶è¿›ç¨‹è°ƒç”¨ wait()ï¼Œè¿™æ—¶å€™çˆ¶è¿›ç¨‹å¯èƒ½åœ¨åšåˆ«çš„äº‹æƒ…è€Œæ²¡æœ‰è°ƒç”¨ wait(), è¿™æ—¶å€™å­è¿›ç¨‹å°±æ˜¯åƒµå°¸è¿›ç¨‹ã€‚å­¤å„¿è¿›ç¨‹ï¼šçˆ¶è¿›ç¨‹æ­»äº†ã€‚è¿™æ—¶å€™ systemd (æ°¸è¿œä¸ä¼šæ¶ˆå¤±çš„è¿›ç¨‹ï¼Œ1 å·è¿›ç¨‹) ä¼šå–ä»£çˆ¶è¿›ç¨‹çš„è§’è‰²ï¼Œå‘¨æœŸåœ°å‘é€ wait()ã€‚</p>
<h3 id="android-process-importance-hierarchy">Android Process Importance Hierarchy<a class="headerlink" href="#android-process-importance-hierarchy" title="Permanent link">&para;</a></h3>
<p>éœ€è¦æŠŠä¸é‡è¦çš„è¿›ç¨‹ç»™ kill æ‰ã€‚</p>
<h3 id="interprocess-communication">Interprocess Communication<a class="headerlink" href="#interprocess-communication" title="Permanent link">&para;</a></h3>
<p>è¿›ç¨‹ä¹‹é—´é€šè¿‡åä½œã€‚å…±äº«å†…å­˜æˆ–è€…æ¶ˆæ¯ä¼ é€’ã€‚</p>
<p>MMAP å¯ä»¥ä½¿å¾—ä¸€ä¸ªè™šæ‹Ÿåœ°å€ç©ºé—´å’Œå’Œä¸€ä¸ª filedescripter ç»‘å®šï¼Œæ¥ä¸‹é‡Œæˆ‘å°±ä¸è¦å†è°ƒç”¨ read/write å¯¹æ–‡ä»¶è¿›è¡Œè¯»å†™ï¼Œè€Œåªéœ€è¦å¯¹ è™šæ‹Ÿåœ°å€ç©ºé—´ çš„ç›¸å…³å†…å®¹è¿›è¡Œä¿®æ”¹å³å¯ã€‚å¢åŠ äº†ç¨‹åºçš„æ€§èƒ½ã€‚</p>
<h3 id="remote-procedure-call-rpc">Remote Procedure Call RPC<a class="headerlink" href="#remote-procedure-call-rpc" title="Permanent link">&para;</a></h3>
<p>stub æ¡©ï¼Œä½œå‡½æ•°å‚æ•°çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚stub æ¡©åº•å±‚çš„å®ç°æœºåˆ¶å°±æ˜¯ pipeï¼Œshared memory æˆ–è€… socket æ¥å£ã€‚stub ä¼šå°†å‚æ•° marshell åºåˆ—åŒ–ï¼Œä¼ é€’ç»™å¦å¤–ä¸€ä¸ªè¿›ç¨‹ Bï¼Œè¿›ç¨‹ B ä¸­çš„ stub ä¼šç›‘å¬æ˜¯å¦æœ‰äººä¼ é€’æ•°æ®ï¼Œå¦‚æœæœ‰äººä¼ é€’æ•°æ®å°±ä¼šè¿›è¡Œååºåˆ—åŒ–ã€‚</p>
<p>marshall æ˜¯å¾ˆå®¹æ˜“å‡ºé”™çš„ã€‚å¯ä»¥è®¤ä¸ºæ˜¯ä¸€ä¸ªè¿›ç¨‹å¾ˆå®¹æ˜“åœ°å°±ä¿®æ”¹äº†å¦å¤–ä¸€ä¸ªè¿›ç¨‹çš„å¯„å­˜å™¨ã€‚RPC call çš„ server æ˜¯æ¯”è¾ƒå±é™©çš„ã€‚å¦‚æœæš´éœ²äº†è¿‡å¤šçš„èƒ½åŠ›ï¼Œé‚£ä¹ˆ<br />
å†…å­˜ä»»æ„ä½ç½®éƒ½ä¼šè¢«æ›´æ”¹ã€‚</p>
<p>authenication é‰´æƒã€‚server æ ¹æ®è¿›ç¨‹è‡ªå·±ä¼ çš„ pid å’Œ uid è¿›è¡Œé‰´æƒæ˜¯ä¸å¯¹çš„ï¼Œå› ä¸ºæ¥æºå¹¶ä¸æ˜¯ä¸€ä¸ªå¯ä¿¡æ¥æºã€‚åªæœ‰å†…æ ¸æ‰æ˜¯å¯ä¿¡æ¥æºï¼ˆä¸ç„¶æ“ä½œç³»ç»Ÿéƒ½ä¸å¯ä¿¡çš„è¯ï¼Œé‚£å°±æ²¡ä»€ä¹ˆå¯ä¿¡äº†ï¼‰ã€‚</p>
<h2 id="thread_2">Thread<a class="headerlink" href="#thread_2" title="Permanent link">&para;</a></h2>
<p>è™½ç„¶æ¯ä¸€ä¸ª thread æœ‰è‡ªå·±çš„ resourceï¼Œä¾‹å¦‚ program counter, stack, registers ä¹‹ç±»ï¼Œä½†å¹¶ä¸ä»£è¡¨è¿™äº›ä¸åŒ thread ä¹‹é—´çš„èµ„æºæ˜¯ç›¸äº’éš”ç¦»çš„ã€‚ä¸å…±äº«ä¸ä»£è¡¨éš”ç¦»ã€‚çº¿ç¨‹å…±äº«äº†è¿›ç¨‹çš„è™šæ‹Ÿåœ°å€ç©ºé—´ã€‚</p>
<p>è™šæ‹Ÿåœ°å€ç©ºé—´ä¸æ˜¯è¢« user space ç‹¬å çš„ã€‚è€Œæ˜¯ç”± user space å’Œ kernal space ä¸€èµ·å…±åŒå æœ‰ 2^32 è™šæ‹Ÿåœ°å€ç©ºé—´çš„ã€‚</p>
<p>TODOï¼šper-thread resource æœ‰å“ªäº›</p>
<p>å¤šçº¿ç¨‹å¢åŠ äº†ç³»ç»Ÿçš„å¹¶å‘æ€§ã€‚å¹¶è¡Œæ˜¯æŒ‡åŒä¸€æ—¶åˆ»æœ‰å¤šä¸ªçº¿ç¨‹åœ¨æ‰§è¡Œï¼Œå¹¶å‘æ˜¯æŒ‡ä¸€æ®µæ—¶é—´å†…æœ‰å¤šä¸ªçº¿ç¨‹åœ¨æ‰§è¡Œã€‚</p>
<p>å¦‚æœä¸€ä¸ªè¿›ç¨‹ä¸­çš„ä¸¤ä¸ªçº¿ç¨‹æƒ³è¢«å¹¶è¡Œè°ƒç”¨çš„è¯ï¼Œåˆ™éœ€è¦åœ¨å†…æ ¸ä¸­ä¹Ÿå®ç°çº¿ç¨‹çš„æ¦‚å¿µã€‚å¦‚æœå†…æ ¸ä¸­æ²¡æœ‰çº¿ç¨‹è¿™ä¸ªæ¦‚å¿µï¼Œé‚£ä¹ˆä»ç„¶ä¼šæŒ‰ç…§è¿›ç¨‹çš„æ–¹å¼è¿›è¡Œè°ƒåº¦ï¼Œè¿™æ—¶å€™æ¯æ¬¡è°ƒç”¨åˆ°åˆ’åˆ†ä¸ºçº¿ç¨‹çš„è¿›ç¨‹æ—¶ï¼Œè¿è¡Œæ—¶ç³»ç»Ÿï¼ˆä¸€ä¸ªç”¨æˆ·æ€çš„è°ƒåº¦å™¨ï¼‰ä¼šå†³å®šå½“å‰è¿›ç¨‹ä¸­çš„å“ªä¸€ä¸ªçº¿ç¨‹çœŸæ­£è¢«è°ƒç”¨ã€‚å½“ç„¶ç°åœ¨æ“ä½œç³»ç»Ÿéƒ½æ”¯æŒå†…æ ¸çº¿ç¨‹è¿™ä¸ªæ¦‚å¿µã€‚</p>
<p>ç°åœ¨éƒ½æ˜¯ one to one çš„å…³ç³»ï¼Œå³ä¸€ä¸ªç”¨æˆ·æ€çº¿ç¨‹å¯¹åº”ä¸€ä¸ªå†…æ ¸çº¿ç¨‹ã€‚</p>
<p>ä¸ºä»€ä¹ˆéœ€è¦ fork ä¹‹åç«‹é©¬ç”¨ exec å‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºæˆ‘ä»¬æƒ³è¦æœ‰è¿™æ ·ä¸€ç§â€œå­è¿›ç¨‹â€çš„å…³ç³»ã€‚ä½†æ˜¯æˆ‘ä»¬ä¸éœ€è¦çˆ¶è¿›ç¨‹çš„ä»£ç ï¼Œæ•°æ®ï¼Œæ ˆç­‰ç­‰ç­‰ç­‰æ‰€æœ‰çš„ã€‚æˆ‘ä»¬è°ƒç”¨ exec ä¹‹å pid ä¸ä¼šå‘ç”Ÿæ”¹å˜ï¼Œä½†æ˜¯å…¶ä»–çš„ä¸œè¥¿éƒ½ä¼šå‘ç”Ÿæ”¹å˜ã€‚</p>
<h3 id="thread-cancellation">Thread Cancellation<a class="headerlink" href="#thread-cancellation" title="Permanent link">&para;</a></h3>
<p>terminate a thread before it finish</p>
<p>critical section è¿™ä¸€éƒ¨åˆ†ä»£ç ä¼šæ¶‰åŠå¯¹ heap global ç­‰èµ„æºçš„è®¿é—®ï¼Œåœ¨åŒä¸€æ—¶åˆ»ï¼Œä¸åŒçš„ thread ä¸­åªèƒ½æœ‰ä¸€ä¸ª thread åœ¨æ‰§è¡Œ critical section éƒ¨åˆ†çš„ä»£ç ã€‚</p>
<p>ä¸ºäº†é˜²æ­¢ä¸åŒ thread è®¿é—® critical section çš„ç´Šä¹±ï¼Œé€šå¸¸ä¼šé‡‡ç”¨ deferred cancellationã€‚</p>
<h3 id="thread-specific-data--tls">Thread Specific Data &amp; TLS<a class="headerlink" href="#thread-specific-data--tls" title="Permanent link">&para;</a></h3>
<p>TLS, thread local storage allows each thread to have its own copy of data. è¿™é‡Œçš„æ‰€è°“çš„ copy å°±æ˜¯æŒ‡ tls å…è®¸æ¯ä¸ª thread å¯¹ä¸€ç±»å…¨å±€å˜é‡æœ‰è‡ªå·±çš„ä¸€ä»½æ‹·è´ã€‚tls is unique to each thread.</p>
<p>å¯¹äº TLS ç±»å‹çš„å˜é‡ï¼Œç¼–è¯‘å™¨å°†ç±»ä¼¼äº <code>b=5</code> è¿™æ ·çš„ä»£ç ç¿»è¯‘ä¸ºæ±‡ç¼–çš„æ—¶å€™ï¼Œä¸ä¼šé‡‡ç”¨ç®€å•çš„ load å’Œ storeï¼Œè€Œæ˜¯ä¼šæ ¹æ®å½“å‰çº¿ç¨‹çš„ tid è¿›è¡Œä¸€ç³»åˆ—å¤„ç†ï¼Œä¾‹å¦‚åœ¨ global ä¸­åˆ’å‡ºä¸€ä¸ªå“ˆå¸Œè¡¨ï¼Œè¡¨æ˜åœ°å€çš„æ˜ å°„ã€‚</p>
<p>pthread æä¾›äº†ä¸€äº› APIï¼Œå¯ä»¥å¸®åŠ©çº¿ç¨‹åˆ›å»ºè‡ªå·±çš„ TLSã€‚</p>
<h3 id="lightweight-process--scheduler-activities">Lightweight Process &amp; Scheduler Activities<a class="headerlink" href="#lightweight-process--scheduler-activities" title="Permanent link">&para;</a></h3>
<p>LWP is the intermediate data structure between the user and kernal thread in many-to-many and two level models. æ¯ä¸€ä¸ª lwp å¯¹åº”ä¸€ä¸ª kernal threadã€‚å¯¹äº user - thread æ¥è¯´ï¼Œè¿™äº› lwp å°±åƒæ˜¯ virtual processor.</p>
<p>user thread çš„è¿è¡Œæ—¶æ˜¯ thread libraryã€‚</p>
<p>æ³¨æ„è¿™é‡Œçš„ lwp ä¸æ˜¯åœ¨ linux å†…æ ¸ä¸­æ‰€æŒ‡çš„ lwpã€‚è¿™é‡Œæ‰€è®²çš„ lwp æ˜¯åœ¨ç”¨æˆ·æ€è¿è¡Œæ—¶ä¸­æŠ½è±¡å‡ºæ¥çš„ï¼Œå’Œå†…æ ¸çº¿ç¨‹ 1 to 1 mapping çš„ä¸€ä¸ªä¸œè¥¿ã€‚</p>
<h3 id="linux-thread">Linux Thread<a class="headerlink" href="#linux-thread" title="Permanent link">&para;</a></h3>
<p>linux thread æœ‰ fork å’Œ clone è¿™ä¸¤ä¸ª system callã€‚clone ä¼šæ¥æ”¶æ ‡å¿— flagï¼Œè¿™äº› flag ä¼šå†³å®š parent å’Œ children ä¸­é—´æœ‰å“ªäº›èµ„æºæ˜¯å…±äº«çš„ã€‚å¦‚æœ no flag setï¼Œå°±ä»£è¡¨ no sharingï¼Œé‚£ä¹ˆè¿™æ—¶å€™çš„ clone å°±å’Œ fork æ˜¯å®Œå…¨ç­‰ä»·çš„ã€‚</p>
<p>linux æ˜¯ä¸ä¼šåŒºåˆ† process å’Œ thread çš„ã€‚å¹¶ä¸” linux é‡‡ç”¨æœ¯è¯­ task æ›¿ä»£ threadï¼Œæ¯•ç«Ÿä¸¤ä¸ªå®ä½“ä¹‹é—´å¯ä»¥ partially å…±äº«èµ„æºï¼Œè€Œ thread æ˜¯éœ€è¦å…¨éƒ¨å…±äº«çš„ã€‚ä¸ºäº†é¿å…æ··æ·†ï¼Œæœ‰æ—¶å€™ä¹Ÿç”¨ kernel scheduling entity æŒ‡ä»£ kernel threadã€‚</p>
<h3 id="thread-library">Thread Library<a class="headerlink" href="#thread-library" title="Permanent link">&para;</a></h3>
<p>æä¾› API è¿›è¡Œ creating and managing threads.</p>
<p>pthread, java, win32 æ˜¯ä¸‰å¤§ thread libraryã€‚</p>
<h3 id="linux-thread_1">Linux Thread<a class="headerlink" href="#linux-thread_1" title="Permanent link">&para;</a></h3>
<p>linux çš„ user level thread éµå¾ª POSIX æ ‡å‡†ï¼ŒPortable operating system interface for unixã€‚
åœ¨ linux ä¸­ï¼Œkernal thread è¢«è®¤ä¸ºæ˜¯ light weight process. ä¹Ÿå³åœ¨ linux ç³»ç»Ÿä¸­ï¼Œæˆ‘ä»¬è®² LWP çš„æ—¶å€™ï¼ŒæŒ‡çš„å°±æ˜¯å†…æ ¸çº¿ç¨‹ã€‚</p>
<p><code>ps -elf</code> è¿™ä¸€åˆ—æœ‰ä¸€ä¸ª NLWPï¼Œå¦‚æœè¿™ä¸€åˆ—ä¸º 1ï¼Œåˆ™ä»£è¡¨å½“å‰è¿›ç¨‹åªæœ‰ä¸€ä¸ªçº¿ç¨‹ã€‚ä¸€ä¸ª user ä¸‹çš„ process ä¼šæœ‰å¤šä¸ª LWPï¼Œè¿™æ˜¯å› ä¸º LWP åœ¨ linux è¯­ä¹‰ä¸‹å°±æ˜¯å†…æ ¸çº¿ç¨‹ï¼Œè€Œå†…æ ¸çº¿ç¨‹æ˜¯ä¸ user thread ä¸€ä¸€å¯¹åº”çš„ï¼Œå› æ­¤ä¸€ä¸ª pid å¯ä»¥æœ‰ä¸€å † LWPã€‚</p>
<p>Linux åˆ›é€  lwp æ˜¯é€šè¿‡ clone() ç³»ç»Ÿè°ƒç”¨ï¼Œè¿™ä¸ªç³»ç»Ÿè°ƒç”¨ç±»ä¼¼äº fork(), ä½†æ˜¯æ›´åŠ é€šç”¨ã€‚fork() åˆ›å»ºå‡ºæ¥çš„å­è¿›ç¨‹ä¸çˆ¶è¿›ç¨‹æ˜¯å®Œå…¨éš”ç¦»çš„ã€‚è€Œ clone() åˆ™ä¼šæ ¹æ® flag çš„ä¸åŒè€Œä½¿å¾—æ˜¯å¦å…±äº«èµ„æºä¹Ÿæœ‰æ‰€ä¸åŒã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ forkï¼ˆï¼‰çš„æƒ…å†µä¸‹ï¼Œå­è¿›ç¨‹ä¼šæ‹·è´çˆ¶è¿›ç¨‹çš„ fliedescripterï¼Œä½†æ˜¯çˆ¶è¿›ç¨‹å’Œå­è¿›ç¨‹ä¸å…±äº« memoryã€‚ç”±äº filedescripter æ˜¯æ‹·è´çš„å½¢å¼ï¼Œå› æ­¤å­è¿›ç¨‹å…³é—­ filedescripter å¹¶ä¸ä¼šå½±å“åˆ°çˆ¶è¿›ç¨‹ã€‚clone çš„åœºæ™¯åº•ä¸‹ï¼Œåˆ™ä¼šäº§ç”Ÿå½±å“ã€‚è¿›ç¨‹å’Œçº¿ç¨‹æœ€æœ¬è´¨çš„åŒºåˆ«å°±æ˜¯ä¸¤è€…æ˜¯å¦æ˜¯åŒæ ·çš„è™šæ‹Ÿåœ°å€ç©ºé—´ã€‚å¦‚æœ clone() çš„æ—¶å€™ä½¿å¾—ä¸å…±äº« filedescripter çš„è¯ï¼Œé‚£ä¹ˆå­çº¿ç¨‹æ˜¯å¯ä»¥ close è‡ªå·±çš„ filedescripter è€Œä¸å½±å“åˆ°çˆ¶çº¿ç¨‹çš„ã€‚</p>
<h2 id="cpu-scheduling">CPU Scheduling<a class="headerlink" href="#cpu-scheduling" title="Permanent link">&para;</a></h2>
<h3 id="basic-concepts">Basic Concepts<a class="headerlink" href="#basic-concepts" title="Permanent link">&para;</a></h3>
<p>ç¡¬ä»¶ threadã€‚ç°ä»Šçš„è®¡ç®—æœºçš„ processor çš„ä¸€ä¸ª cor ä¸­ï¼Œå¯èƒ½å­˜åœ¨å¤šå¥—çš„ register setï¼Œä½†æ˜¯æ‰§è¡Œå•å…ƒåªæœ‰ä¸€å¥—ã€‚ä¹Ÿå°±æ˜¯å¯ä»¥åŒæ—¶æ‰§è¡Œä¸¤ä¸ª threadã€‚è¿™ä¸¤ä¸ªåœ¨åŒä¸€ä¸ª core ä¸Šé¢çš„æ‰§è¡Œè¿‡ç¨‹çš„è°ƒåº¦åˆ™äº¤ç”± CPU è¿›è¡Œè§£å†³ã€‚ä»è¿™ç§è§’åº¦æ¥çœ‹ï¼Œå¯ä»¥çœ‹åšæ˜¯ä¸¤ä¸ªè™šæ‹Ÿçš„ CPUã€‚</p>
<p>CPU burst ä»£è¡¨å¤§éƒ¨åˆ†çš„æ—¶é—´éƒ½åœ¨è¿›è¡Œ CPU çš„è¿ç®—ï¼ŒIO burst åˆ™ä»£è¡¨å¤§éƒ¨åˆ†çš„æ—¶é—´éƒ½åœ¨ç”¨äº IOã€‚</p>
<p>æŠ¢å å¼è°ƒåº¦ä¸éæŠ¢å å¼è°ƒåº¦ã€‚</p>
<p>ç”¨æˆ·æ€è°ƒåº¦ï¼ŒæŒ‡çš„æ˜¯ä»å†…æ ¸æ€è¿”å›åˆ°ç”¨æˆ·æ€ä¹‹åï¼Œè¿™ä¸ªæ—¶åˆ»éœ€ä¸éœ€è¦è¿›è¡Œè°ƒåº¦ã€‚å†…æ ¸è°ƒåº¦ï¼ŒæŒ‡çš„æ˜¯å†…æ ¸æ€ä¸‹çš„è¿›ç¨‹å‘ç”Ÿäº†ä¸­æ–­ï¼Œä¸­æ–­å®Œæˆè¿”å›æ—¶ï¼Œæ˜¯é€‰æ‹©è¿”å›åˆ°è¿™ä¸ªå†…æ ¸æ€è¢«æ‰“æ–­çš„åœ°æ–¹ï¼Œè¿˜æ˜¯è°ƒåº¦å¦å¤–ä¸€ä¸ªçº¿ç¨‹å®ä½“è¿›è¡Œæ‰§è¡Œã€‚å†…æ ¸æ€ä¸å¯æŠ¢å çš„ç¨‹åºï¼Œåœ¨ç”¨æˆ·æ€ä¸‹ä»ç„¶æ˜¯å¯ä»¥æŠ¢å çš„ã€‚å†…æ ¸æŠ¢å å¯èƒ½ä¼šå¯¼è‡´æ•°æ®çš„ä¸ä¸€è‡´æ€§ï¼Œå› æ­¤å¯èƒ½ä¼šé‡‡ç”¨ä¸¤ç§æ–¹æ³•ï¼Œä¸€ç§æ–¹æ³•æ˜¯å°†å†…æ ¸æ€è®¾è®¡ä¸ºéæŠ¢å å¼çš„ï¼Œå¦ä¸€ç§æ–¹æ³•æ˜¯å°†å†…æ ¸åœ¨æ“çºµ shared data çš„æ—¶å€™ï¼Œè®¾è®¡ä¸ºä¸å¯è¢«æŠ¢å ã€‚</p>
<h3 id="scheduling-criteria-è°ƒåº¦çš„å‡†åˆ™">Scheduling Criteria è°ƒåº¦çš„å‡†åˆ™<a class="headerlink" href="#scheduling-criteria-è°ƒåº¦çš„å‡†åˆ™" title="Permanent link">&para;</a></h3>
<p>CPU utilizationï¼šCPU åˆ©ç”¨ç‡<br />
throughput : ååé‡ã€‚
turnaround timeï¼šæ‰§è¡Œä¸€ä¸ªè¿›ç¨‹çš„æ—¶é—´ã€‚ä»è¿›ç¨‹å¼€å§‹åˆ°è¿›ç¨‹ç»“æŸã€‚
waiting timeï¼šåœ¨ç­‰å¾…é˜Ÿåˆ—ä¸­ç­‰å¾…çš„æ—¶é—´ã€‚
response timeï¼šä»ç¬¬ä¸€æ¬¡æäº¤åˆ°æä¸€æ¬¡å‘ç”Ÿç›¸åº”çš„æ—¶é—´ã€‚</p>
<h3 id="algorithm-è°ƒåº¦çš„ç®—æ³•">Algorithm è°ƒåº¦çš„ç®—æ³•<a class="headerlink" href="#algorithm-è°ƒåº¦çš„ç®—æ³•" title="Permanent link">&para;</a></h3>
<p>FCFSï¼Œfirst in first serverã€‚éæŠ¢å çš„ã€‚
SJFï¼Œshortest job firstã€‚SJF å¯èƒ½æ˜¯æŠ¢å å¼çš„ä¹Ÿå¯èƒ½æ˜¯éæŠ¢å å¼çš„ã€‚
priority scheduling<br />
RRï¼Œround-robinã€‚è½®è¯¢ã€‚
multilevel queue schedulingã€‚æœ‰ä¸åŒçš„é˜Ÿåˆ—ï¼Œå¯¹æ¯ä¸ªé˜Ÿåˆ—é‡‡ç”¨çš„æ˜¯ä¸åŒçš„è°ƒåº¦ç®—æ³•ã€‚
multilevel feedback queue schedulingã€‚æœ€é€šç”¨å¤æ‚åº¦æœ€é«˜çš„ç®—æ³•ã€‚ä¸€ä¸ªè¿›ç¨‹å¯èƒ½åœ¨ä¸åŒçš„é˜Ÿåˆ—ä¹‹é—´åˆ‡æ¢ã€‚</p>
<h3 id="thread-scheduling">Thread Scheduling<a class="headerlink" href="#thread-scheduling" title="Permanent link">&para;</a></h3>
<p>contention äº‰ç”¨ scope èŒƒå›´<br />
SCSï¼Œsystem-contention scopeã€‚CPU èµ„æºåœ¨æ‰€æœ‰çš„çº¿ç¨‹ä¹‹é—´è¿›è¡Œç«äº‰ã€‚
PCSï¼Œprocess-contention scope ( n-1 æˆ–è€… n-n ) è°ƒåº¦æ˜¯åœ¨è¿›ç¨‹å’Œè¿›ç¨‹ä¹‹é—´è¿›è¡Œç«äº‰çš„ã€‚åœ¨ä¸æ˜¯ 1 to 1 æ˜ å°„çš„æƒ…å†µä¸‹ï¼Œå½“ä¸€ä¸ªå†…æ ¸çº¿ç¨‹è¢«è°ƒç”¨çš„æ—¶å€™ï¼Œéœ€è¦ç”± LWP æ¥å†³å®šæ˜¯å¯¹åº”çš„å¤šä¸ªç”¨æˆ·çº¿ç¨‹ä¸­çš„å“ªä¸€ä¸ªç”¨æˆ·çº¿ç¨‹æ¥è¿è¡Œã€‚</p>
<h3 id="multiple-processor-scheduling-å¤šå¤„ç†å™¨çš„è°ƒåº¦">Multiple-processor Scheduling å¤šå¤„ç†å™¨çš„è°ƒåº¦<a class="headerlink" href="#multiple-processor-scheduling-å¤šå¤„ç†å™¨çš„è°ƒåº¦" title="Permanent link">&para;</a></h3>
<p>symmetric multiprocessing å¯¹ç§°çš„ SMP æ¯ä¸ªå¤„ç†å™¨åœ°ä½æ˜¯ä¸€æ ·çš„<br />
asymmetric multiprocessing éå¯¹ç§°çš„</p>
<p>CMT ç¡¬ä»¶å¤šçº¿ç¨‹ multithread coreã€‚ç¡¬ä»¶ä¼šå†³å®šå“ªä¸€ä¸ªçœŸæ­£çš„ thread åœ¨è¿™ä¸€æ—¶åˆ»è·‘åœ¨äº† cpu ä¸Šã€‚</p>
<p>load balancing è´Ÿè½½å‡è¡¡<br />
processor affinity å¤„ç†å™¨äº²å’Œæ€§ã€‚CPU çš„ cache ä¼šä¿å­˜ä¸€ä¸ªè¿›ç¨‹è¿è¡Œæ—¶çš„ä¸€äº›éœ€è¦çš„æ•°æ®ï¼Œè€Œåš load balancing çš„æ—¶å€™ä¸èƒ½æ¬è¿è¿™äº›æ•°æ®ã€‚è¿™æ˜¯ç¨‹åºè¿è¡Œå±€éƒ¨æ€§åŸç†çš„ä½“ç°ã€‚</p>
<p>NUMAï¼šæ¯ä¸ª CPU éƒ½æœ‰è‡ªå·±çš„ physical memoryã€‚ä½†æ˜¯è¿™äº› memory æ˜¯åŒä¸€ç¼–å€çš„ã€‚</p>
<p>soft real-time systemï¼šè½¯å®æ—¶ç³»ç»Ÿã€‚å®æ—¶ä»»åŠ¡ä¼˜å…ˆçº§ä¼šæ›´åŠ é«˜ï¼Œä½†ä¸èƒ½ä¿è¯ä¸‹ä¸€æ—¶åˆ»å°±è¢«è°ƒåº¦ã€‚
hard real-time systemï¼šç¡¬å®æ—¶ç³»ç»Ÿã€‚ä¿è¯äº†ä¸‹ä¸€æ—¶åˆ»å°±è¢«è°ƒåº¦ã€‚å¦‚æœæ²¡æœ‰åœ¨è§„å®šæ—¶é—´å†…å®Œæˆï¼Œé‚£ä¹ˆ watch dogï¼ˆä¸€ä¸ªç¡¬ä»¶çš„éƒ¨ä»¶ï¼‰ä¼šå°†æ“ä½œç³»ç»Ÿè¿›è¡Œé‡å¯ã€‚</p>
<h2 id="what-really-happened-on-mars">What Really Happened on Mars<a class="headerlink" href="#what-really-happened-on-mars" title="Permanent link">&para;</a></h2>
<p>ç«æ˜Ÿè½¦ï¼Œä¸€ä¸ª CPU è°ƒåº¦ç»å…¸æ¡ˆä¾‹ã€‚
VxWorks æ˜¯ä¸€ä¸ªç¡¬å®æ—¶æ“ä½œç³»ç»Ÿã€‚è¿™æ˜¯ç”±äºæ²¡æœ‰åˆç†æ§åˆ¶ priority å’Œ mutex è€Œå¯¼è‡´çš„ï¼Œæœ€ç»ˆå¯¼è‡´äº† priority inversion ä¼˜å…ˆçº§åè½¬ã€‚è§£å†³æ–¹æ¡ˆæ˜¯ä¼˜å…ˆçº§ç»§æ‰¿ï¼Œå¦‚æœä½ä¼˜å…ˆçº§çº¿ç¨‹æŒæœ‰è¢«é«˜ä¼˜å…ˆçº§çº¿ç¨‹éœ€è¦çš„èµ„æºï¼Œé‚£ä¹ˆå°±éœ€è¦æé«˜è¿™ä¸ªä½ä¼˜å…ˆçº§çº¿ç¨‹çš„ä¼˜å…ˆçº§ã€‚</p>
<h2 id="synchronization">Synchronization<a class="headerlink" href="#synchronization" title="Permanent link">&para;</a></h2>
<h3 id="race-condition">Race Condition<a class="headerlink" href="#race-condition" title="Permanent link">&para;</a></h3>
<p>å¤šä¸ªçº¿ç¨‹åŒæ—¶æ“ä½œå…±äº«çš„ dataï¼Œåˆ™ç¨‹åºæ‰§è¡Œçš„ç»“æœå–å†³äºç¨‹åºæ‰§è¡Œçš„é¡ºåºã€‚ç«äº‰æ¡ä»¶ã€‚</p>
<h3 id="critical-section">Critical Section<a class="headerlink" href="#critical-section" title="Permanent link">&para;</a></h3>
<p>entry sectionï¼šç­‰å¾…è¿›å…¥ critical section çš„ä»£ç åŒºåŸŸ<br />
critical sectionï¼šå»ä¿®æ”¹ä¸€äº›å…±äº«çš„èµ„æº<br />
exit sectionï¼šç¦»å¼€ critical sectionï¼Œä¼šå°†ä¸€äº›é”é‡Šæ”¾<br />
remainder sectionï¼šæ— å…³çš„åŒºåŸŸ</p>
<h3 id="solution-to-critical-section-three-requirements">Solution to Critical-section: Three Requirements<a class="headerlink" href="#solution-to-critical-section-three-requirements" title="Permanent link">&para;</a></h3>
<p>mutual exclusionï¼šåªèƒ½æœ‰ä¸€ä¸ª process åœ¨ critical section ä¹‹ä¸­<br />
progressï¼šç”±é‚£äº›ä¸åœ¨ remainder section ä¹‹ä¸­çš„ process å†³å®šä¸‹ä¸€ä¸ªè¿›å…¥ critical section çš„æ˜¯è°ï¼Œå¹¶ä¸”è¿™ä¸ªé€‰æ‹©ä¸€å®šæ˜¯å¯ä»¥é€‰å‡ºæ¥çš„ã€‚
bounded waitingï¼šå‘å‡ºè¿›å…¥ critical section ä¹‹åå¿…é¡»æœ‰é™çš„æ—¶é—´å†…å¾—åˆ°è§£å†³ã€‚</p>
<h3 id="sequential-consistency-sc">Sequential Consistency (SC)<a class="headerlink" href="#sequential-consistency-sc" title="Permanent link">&para;</a></h3>
<p>æœ€ç»ˆåœ¨æœºå™¨ä¸Šæ‰§è¡Œçš„æŒ‡ä»¤é¡ºåºå’Œæˆ‘ä»¬çœ‹åˆ°çš„æ˜¯ä¸€æ ·çš„ã€‚CPU ä¸ä¼šè¿›è¡ŒæŒ‡ä»¤çš„é‡æ’ã€‚</p>
<h3 id="hardware-instructions">Hardware Instructions<a class="headerlink" href="#hardware-instructions" title="Permanent link">&para;</a></h3>
<p>test-and-set instruction, ä¼šå°†æŒ‡å®šåœ°å€å¤„çš„å†…å®¹æ‹¿å‡ºæ¥ï¼Œå¹¶ä¸”å°†æŒ‡å®šåœ°å€å¤„çš„å†…å®¹è®¾ç½®ä¸º trueã€‚æœ‰äº† test-and-set instruction ä¹‹åï¼Œå°±å¯ä»¥å®ç°é”äº†ã€‚ä¸è¿‡ bounded wairing æ˜¯æ²¡æœ‰å®ç°çš„ã€‚
compare-and-swap instructionã€‚åˆ©ç”¨ compare and swap ä¹Ÿå¯ä»¥å®ç°é”çš„æ“ä½œã€‚
<img alt="" src="../../img/effa19afe4a25ff1269d7a11d6bd9de2_MD5.png" /></p>
<p>æˆ‘ä»¬é€šå¸¸æ˜¯å°† test-and-set å’Œ compare-and-swap ä½œä¸ºæœ€åŸºç¡€çš„ block æ¥å®ç°æˆ‘ä»¬çš„é”ã€‚</p>
<h3 id="semaphore-ä¿¡å·é‡">Semaphore ä¿¡å·é‡<a class="headerlink" href="#semaphore-ä¿¡å·é‡" title="Permanent link">&para;</a></h3>
<p>ä»£è¡¨äº†å¤šå°‘ units of a particular resource is availableã€‚
semaphore å¯ä»¥é€šè¿‡ waitï¼ˆP æ“ä½œï¼‰å’Œ signalï¼ˆV æ“ä½œï¼‰æ“ä½œè¿›è¡Œæ›´æ–°ã€‚</p>
<h3 id="synchronization-examples">Synchronization Examples<a class="headerlink" href="#synchronization-examples" title="Permanent link">&para;</a></h3>
<p>bounded buffer problemï¼šç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…å…±äº« n ä¸ª bufferã€‚
reader-writers problemï¼šè¯»è€…å¹¶ä¸ä¿®æ”¹çŠ¶æ€å’Œå†…å®¹ã€‚
dining-philosopher problemï¼šå“²å­¦å®¶è¿›é¤é—®é¢˜ã€‚</p>

  <hr>
<div class="md-source-file">
  <small>
    
      æœ€åæ›´æ–°:
      <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-datetime">2023å¹´8æœˆ11æ—¥ 10:45:38</span>
      
        <br>
        åˆ›å»ºæ—¥æœŸ:
        <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-datetime">2023å¹´8æœˆ11æ—¥ 10:45:38</span>
      
    
  </small>
</div>





                
              </article>
            </div>
          
          
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            å›åˆ°é¡µé¢é¡¶éƒ¨
          </button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright Â© 2022 Apostle-lemon
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="https://github.com/Apostle-lemon" target="_blank" rel="noopener" title="github" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["content.code.annotate", "navigation.instant", "navigation.tracking", "navigation.tabs", "navigation.indexes", "navigation.top", "search.highlight", "search.share"], "search": "../../../assets/javascripts/workers/search.74e28a9f.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.220ee61c.min.js"></script>
      
        
          <script src="../../../javascripts/mathjax.js"></script>
        
      
        
          <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
        
      
        
          <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        
      
    
  </body>
</html>